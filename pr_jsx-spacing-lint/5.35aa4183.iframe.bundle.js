(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{4958:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(33);var query_string=__webpack_require__(4955),query_string_default=__webpack_require__.n(query_string),isObject=__webpack_require__(136),isObject_default=__webpack_require__.n(isObject),mapValues=__webpack_require__(102),mapValues_default=__webpack_require__.n(mapValues),hasJsonStructure=function hasJsonStructure(str){if("string"!=typeof str)return!1;try{var parsed=JSON.parse(str);return"[object Object]"===Object.prototype.toString.call(parsed)}catch(err){return!1}};__webpack_exports__.a={fromQueryString:function fromQueryString(queryString){var obj=query_string_default.a.parse(queryString);return mapValues_default()(obj,(function(value){return hasJsonStructure(value)?JSON.parse(value):value}))},toQueryString:function toQueryString(obj){var stringifiedValues=mapValues_default()(obj,(function(value){return isObject_default()(value)?JSON.stringify(value):value}));return query_string_default.a.stringify(stringifiedValues)}}},4964:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DetailLink}));__webpack_require__(32),__webpack_require__(145),__webpack_require__(0),__webpack_require__(2249);var tocco_util_src_queryString__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4958),tocco_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5163),react_intl__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(11),_utils_routing__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4965),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1),DetailLinkRelativeWithoutIntl=function DetailLinkRelativeWithoutIntl(_ref){var entityKey=_ref.entityKey,children=_ref.children,relation=_ref.relation,intl=_ref.intl;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(tocco_ui__WEBPACK_IMPORTED_MODULE_5__.a,{"aria-label":function msg(id){return intl.formatMessage({id:id})}("client.component.navigationStrategy.detailLinkRelative"),to:"".concat(relation?relation+"/":"").concat(entityKey),children:children})};DetailLinkRelativeWithoutIntl.displayName="DetailLinkRelativeWithoutIntl";var DetailLinkRelative=Object(react_intl__WEBPACK_IMPORTED_MODULE_6__.injectIntl)(DetailLinkRelativeWithoutIntl),DetailLink=function DetailLink(_ref2){var entityName=_ref2.entityName,entityKey=_ref2.entityKey,children=_ref2.children;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(tocco_ui__WEBPACK_IMPORTED_MODULE_5__.a,{to:"/e/".concat(entityName,"/").concat(entityKey),target:"_blank",children:children})};DetailLink.displayName="DetailLink";var ListLink=function ListLink(_ref3){var entityName=_ref3.entityName,entityKeys=_ref3.entityKeys,children=_ref3.children,queryString=entityKeys&&entityKeys.length>0&&"tql=KEYS("+entityKeys.join(",")+")";return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(tocco_ui__WEBPACK_IMPORTED_MODULE_5__.a,{to:{pathname:"/e/".concat(entityName,"/list"),search:"?".concat(queryString)},target:"_blank",children:children})};ListLink.displayName="ListLink",__webpack_exports__.b=function(history,match){return{DetailLink:DetailLink,ListLink:ListLink,DetailLinkRelative:DetailLinkRelative,navigateToCreateRelative:function navigateToCreateRelative(relationName,state){if(relationName)history.push({pathname:"".concat(match.url,"/").concat(relationName,"/create"),state:state});else{var entityBaseUrl=Object(_utils_routing__WEBPACK_IMPORTED_MODULE_7__.a)(match.url);history.push({pathname:entityBaseUrl+"/create",state:state})}},navigateToActionRelative:function navigateToActionRelative(definition,selection){var entityBaseUrl=Object(_utils_routing__WEBPACK_IMPORTED_MODULE_7__.a)(match.url),search=tocco_util_src_queryString__WEBPACK_IMPORTED_MODULE_4__.a.toQueryString({selection:selection,actionProperties:definition.properties});history.push({pathname:entityBaseUrl+"/action/"+definition.appId,state:{definition:definition,selection:selection},search:search})},openDetail:function openDetail(entityName,key){window.open("/e/".concat(entityName,"/").concat(key),"_blank")}}},DetailLink.__docgenInfo={description:"",methods:[],displayName:"DetailLink",props:{entityName:{type:{name:"string"},required:!0,description:""},entityKey:{type:{name:"string"},required:!0,description:""},children:{type:{name:"any"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/admin/src/routes/entities/utils/navigationStrategy.js"]={name:"DetailLink",docgenInfo:DetailLink.__docgenInfo,path:"packages/admin/src/routes/entities/utils/navigationStrategy.js"}),ListLink.__docgenInfo={description:"",methods:[],displayName:"ListLink",props:{entityName:{type:{name:"string"},required:!0,description:""},children:{type:{name:"any"},required:!0,description:""},entityKeys:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/admin/src/routes/entities/utils/navigationStrategy.js"]={name:"ListLink",docgenInfo:ListLink.__docgenInfo,path:"packages/admin/src/routes/entities/utils/navigationStrategy.js"})},4965:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return goBack}));__webpack_require__(221),__webpack_require__(75),__webpack_require__(4967);var goBack=function goBack(url){for(var amount=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,normalizedUrl=url.replace(/\/$/,""),i=0;i<amount;i++)normalizedUrl=normalizedUrl.substring(0,normalizedUrl.lastIndexOf("/"));return normalizedUrl}},4969:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(75),__webpack_require__(240);var DOC_PATH_REGEX=/^\/docs\/doc\/(\d+)\/detail$/,PARENT_PATH_REGEX=/^\/docs\/(domain|folder)\/(\d+)\/list$/;__webpack_exports__.a=function getNode(pathname){return function getResourceNode(pathname){var docMatches=DOC_PATH_REGEX.exec(pathname);return docMatches&&docMatches.length>=2?{model:"Resource",key:docMatches[1]}:null}(pathname)||function getParentNode(pathname){var parentMatches=PARENT_PATH_REGEX.exec(pathname);return parentMatches&&parentMatches.length>=3?{model:parentMatches[1].charAt(0).toUpperCase()+parentMatches[1].slice(1),key:parentMatches[2]}:null}(pathname)}},4978:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return INITIALIZE})),__webpack_require__.d(__webpack_exports__,"c",(function(){return MOVE_ELEMENTS})),__webpack_require__.d(__webpack_exports__,"d",(function(){return SET_WAITING})),__webpack_require__.d(__webpack_exports__,"a",(function(){return CLOSE})),__webpack_require__.d(__webpack_exports__,"f",(function(){return initialize})),__webpack_require__.d(__webpack_exports__,"g",(function(){return moveElements})),__webpack_require__.d(__webpack_exports__,"h",(function(){return setWaiting})),__webpack_require__.d(__webpack_exports__,"e",(function(){return close}));var INITIALIZE="docs/move/INITIALIZE",MOVE_ELEMENTS="docs/move/MOVE_ELEMENTS",SET_WAITING="docs/move/SET_WAITING",CLOSE="docs/move/CLOSE",initialize=function initialize(selection,onSuccess,onError){return{type:INITIALIZE,payload:{selection:selection,onSuccess:onSuccess,onError:onError}}},moveElements=function moveElements(target,selected){return{type:MOVE_ELEMENTS,payload:{target:target,selected:selected}}},setWaiting=function setWaiting(){var isWaiting=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:SET_WAITING,payload:{isWaiting:isWaiting}}},close=function close(){return{type:CLOSE}}},4981:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(117),__webpack_require__(33),__webpack_require__(68);var classCallCheck=__webpack_require__(94),classCallCheck_default=__webpack_require__.n(classCallCheck),createClass=__webpack_require__(95),createClass_default=__webpack_require__.n(createClass),inherits=__webpack_require__(96),inherits_default=__webpack_require__.n(inherits),possibleConstructorReturn=__webpack_require__(97),possibleConstructorReturn_default=__webpack_require__.n(possibleConstructorReturn),getPrototypeOf=__webpack_require__(60),getPrototypeOf_default=__webpack_require__.n(getPrototypeOf),react=(__webpack_require__(105),__webpack_require__(32),__webpack_require__(77),__webpack_require__(146),__webpack_require__(147),__webpack_require__(0)),react_default=__webpack_require__.n(react),reducer=(__webpack_require__(7),__webpack_require__(18)),appFactory=__webpack_require__(57),actionEmitter=__webpack_require__(118),errorLogging=__webpack_require__(101),externalEvents=__webpack_require__(56),notifier=__webpack_require__(26),rest=__webpack_require__(20),createHashHistory=(__webpack_require__(199),__webpack_require__(318),__webpack_require__(2169)),createHashHistory_default=__webpack_require__.n(createHashHistory),createMemoryHistory=__webpack_require__(2172),createMemoryHistory_default=__webpack_require__.n(createMemoryHistory),react_router=__webpack_require__(688),pickBy=__webpack_require__(493),pickBy_default=__webpack_require__.n(pickBy),isEqual=__webpack_require__(315),isEqual_default=__webpack_require__.n(isEqual),isEmpty=__webpack_require__(1375),isEmpty_default=__webpack_require__.n(isEmpty),es=__webpack_require__(23),index_es=__webpack_require__(11),slicedToArray=__webpack_require__(41),slicedToArray_default=__webpack_require__.n(slicedToArray),styled_components_browser_esm=(__webpack_require__(12),__webpack_require__(461),__webpack_require__(75),__webpack_require__(5)),resolveThemePath=__webpack_require__(34),regenerator=__webpack_require__(3),regenerator_default=__webpack_require__.n(regenerator),viewPersistor=(__webpack_require__(240),__webpack_require__(145),__webpack_require__(28),__webpack_require__(82),__webpack_require__(91),__webpack_require__(63),__webpack_require__(66),__webpack_require__(239),__webpack_require__(4956)),LoadMask=__webpack_require__(2248),LazyIcon=__webpack_require__(686),consoleLogger=__webpack_require__(79),jsx_runtime=__webpack_require__(1),actions={"dms-create-folder":Object(react.lazy)((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(2),__webpack_require__.e(10)]).then(__webpack_require__.bind(null,5143))})),"dms-create-domain":Object(react.lazy)((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(2),__webpack_require__.e(10)]).then(__webpack_require__.bind(null,5144))})),"dms-edit":Object(react.lazy)((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(2),__webpack_require__.e(10)]).then(__webpack_require__.bind(null,5145))})),"dms-move":Object(react.lazy)((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(2),__webpack_require__.e(10)]).then(__webpack_require__.bind(null,5166))})),delete:Object(react.lazy)((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(2),__webpack_require__.e(10)]).then(__webpack_require__.bind(null,5146))}))},LazyAction_ref=Object(jsx_runtime.jsx)(LoadMask.a,{}),renderLoader=function renderLoader(){return LazyAction_ref};renderLoader.displayName="renderLoader";var LazyAction_LazyAction=function LazyAction(props){var appId=props.appId,LazyAction=actions[appId];if(!LazyAction)return consoleLogger.a.logError("no action found with id: ".concat(appId)),null;var ActionComponent=Object(es.connect)(null,{emitAction:function emitAction(action){return actionEmitter.a.dispatchEmittedAction(action)}})(LazyAction);return Object(jsx_runtime.jsx)(react.Suspense,{fallback:renderLoader(),children:Object(jsx_runtime.jsx)(ActionComponent,Object.assign({},props))})};LazyAction_LazyAction.displayName="LazyAction",LazyAction_LazyAction.__docgenInfo={description:"",methods:[],displayName:"LazyAction",props:{appId:{type:{name:"string"},required:!0,description:""}}};var Action_LazyAction=LazyAction_LazyAction;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/components/Action/LazyAction.js"]={name:"LazyAction",docgenInfo:LazyAction_LazyAction.__docgenInfo,path:"packages/docs-browser/src/components/Action/LazyAction.js"});var FileInput_FileInput=function FileInput(_ref){var instanceCount=_ref.instanceCount,directory=_ref.directory,onChange=_ref.onChange,fileInput=Object(react.useRef)(),prevInstanceCount=function usePrevious(value){var ref=Object(react.useRef)();return Object(react.useEffect)((function(){ref.current=value})),ref.current}(instanceCount);Object(react.useEffect)((function(){fileInput.current&&instanceCount>prevInstanceCount&&fileInput.current.click()}));return Object(jsx_runtime.jsx)("input",Object.assign({type:"file",ref:fileInput,style:{display:"none"},onChange:function handleChange(e){var files=e.target.files;files&&files.length>0&&onChange&&onChange(files,directory),e.target.value=null},multiple:!0},directory?{webkitdirectory:"true",directory:"true"}:{}))};FileInput_FileInput.displayName="FileInput",FileInput_FileInput.__docgenInfo={description:"",methods:[],displayName:"FileInput",props:{instanceCount:{type:{name:"number"},required:!0,description:""},directory:{type:{name:"bool"},required:!1,description:""},onChange:{type:{name:"func"},required:!1,description:""}}};var components_FileInput_FileInput=FileInput_FileInput;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/components/FileInput/FileInput.js"]={name:"FileInput",docgenInfo:FileInput_FileInput.__docgenInfo,path:"packages/docs-browser/src/components/FileInput/FileInput.js"});var mapActionCreators={onChange:function filesSelected(files,isDirectory){return{type:"docs/create/FILES_SELECTED",payload:{files:files,isDirectory:isDirectory}}}},FileInputContainer=Object(es.connect)((function mapStateToProps(state){return{instanceCount:state.docs.create.dialog.instanceCount,directory:state.docs.create.dialog.directory}}),mapActionCreators)(components_FileInput_FileInput),taggedTemplateLiteral=__webpack_require__(17),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),modularScale=__webpack_require__(31);function _templateObject2(){var data=taggedTemplateLiteral_default()(["\n  display: inline-block;\n  margin-right: ",";\n"]);return _templateObject2=function _templateObject2(){return data},data}function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  display: flex;\n  align-items: center;\n"]);return _templateObject=function _templateObject(){return data},data}var StyledContentWrapper=styled_components_browser_esm.default.div(_templateObject()),StyledIconWrapper=styled_components_browser_esm.default.span(_templateObject2(),modularScale.a.space(-2)),ICONS={Domain:"globe",Folder:"folder",Resource:"file"},LazyListApp=react_default.a.lazy((function(){return __webpack_require__.e(29).then(__webpack_require__.bind(null,5142))})),DocsView_ref2=Object(jsx_runtime.jsx)(LoadMask.a,{}),DocsView_ref3=Object(jsx_runtime.jsx)(FileInputContainer,{}),DocsView_DocsView=function DocsView(props){var storeKey=props.storeKey,history=props.history,match=props.match,domainTypes=props.domainTypes,rootNodes=props.rootNodes,navigationStrategy=props.navigationStrategy,changeListParent=props.changeListParent,onSearchChange=props.onSearchChange,emitAction=props.emitAction,openFileDialog=props.openFileDialog,limit=props.limit,searchFormType=props.searchFormType,selectionStyle=props.selectionStyle,getCustomLocation=props.getCustomLocation,disableViewPersistor=props.disableViewPersistor,formName=props.formName,showActions=props.showActions,sortable=props.sortable,searchMode=props.searchMode,openResource=props.openResource,_useState=Object(react.useState)([]),_useState2=slicedToArray_default()(_useState,2),selection=_useState2[0],setSelection=_useState2[1],parent=Object(react.useMemo)((function(){return function getParent(match){if(match.params&&match.params.model){var model=match.params.model.charAt(0).toUpperCase()+match.params.model.slice(1),key=match.params.key;return{model:"Docs_list_item",key:"".concat(model,"/").concat(key)}}return null}(match)}),[match.params]),keys=!parent&&rootNodes?rootNodes.map((function(node){return"".concat(node.entityName,"/").concat(node.key)})):null,listFormName=Object(react.useMemo)((function(){return null===formName?function getFormName(parent,keys){return parent?"Docs_list_item":keys?"Root_docs_list_item_specific":"Root_docs_list_item"}(parent,keys):formName}),[match.params]),mounted=Object(react.useRef)(!1);Object(react.useEffect)((function(){return mounted.current=!0,function(){return mounted.current=!1}})),Object(react.useEffect)((function(){changeListParent(parent),setSelection([])}),[parent]);var tql=parent||keys?null:function getTql(domainTypes){return Array.isArray(domainTypes)&&domainTypes.length>0?"exists(relDomain_type where IN(unique_id, ".concat(domainTypes.map((function(type){return'"'.concat(type,'"')})).join(","),"))"):null}(domainTypes),handleUploadDocument=regenerator_default.a.mark((function handleUploadDocument(definition,selection,parent,params,config,onSuccess,onError){return regenerator_default.a.wrap((function handleUploadDocument$(_context){for(;;)switch(_context.prev=_context.next){case 0:!1,openFileDialog(history.location.pathname,!1,onSuccess,onError);case 2:case"end":return _context.stop()}}),handleUploadDocument)})),handleUploadDirectory=regenerator_default.a.mark((function handleUploadDirectory(definition,selection,parent,params,config,onSuccess,onError){return regenerator_default.a.wrap((function handleUploadDirectory$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:!0,openFileDialog(history.location.pathname,!0,onSuccess,onError);case 2:case"end":return _context2.stop()}}),handleUploadDirectory)})),store=disableViewPersistor?void 0:searchMode?viewPersistor.a.viewInfoSelector("search").store:null;return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)(react.Suspense,{fallback:DocsView_ref2,children:Object(jsx_runtime.jsx)(LazyListApp,{id:"documents",entityName:"Docs_list_item",formName:listFormName,limit:limit||25,onRowClick:function handleRowClick(_ref){var id=_ref.id;if("/docs/search"===history.location.pathname){var searchStore=viewPersistor.a.viewInfoSelector(storeKey).store;viewPersistor.a.persistViewInfo("search",{store:searchStore})}var _id$split=id.split("/"),_id$split2=slicedToArray_default()(_id$split,2),model=_id$split2[0],key=_id$split2[1],location=getCustomLocation?getCustomLocation(model,key):function getDefaultLocation(model,key){switch(model){case"Domain":return"/docs/domain/".concat(key,"/list");case"Folder":return"/docs/folder/".concat(key,"/list");case"Resource":return"/docs/doc/".concat(key,"/detail");default:throw new Error("Unexpected model: ".concat(model))}}(model,key);location&&(openResource&&"Resource"===model?openResource(location):history.push(location))},searchFormPosition:"left",searchFormType:searchFormType||"admin",parent:parent,onSearchChange:function handleSearch(e){mounted.current&&onSearchChange(e)},store:store,onStoreCreate:function onStoreCreate(store){disableViewPersistor||viewPersistor.a.persistViewInfo(storeKey,{store:store})},cellRenderers:{"dms-label-with-icon":function dmsLabelWithIcon(rowData,column,cellRenderer){return Object(jsx_runtime.jsxs)(StyledContentWrapper,{children:[Object(jsx_runtime.jsx)(StyledIconWrapper,{children:Object(jsx_runtime.jsx)(LazyIcon.a,{icon:ICONS[rowData.type]})}),Object(jsx_runtime.jsx)("span",{children:cellRenderer(column.children[0])})]})}},emitAction:emitAction,actionAppComponent:Action_LazyAction,contextParams:{history:history},customActions:{"upload-document":handleUploadDocument,"upload-directory":handleUploadDirectory},navigationStrategy:navigationStrategy,tql:tql,keys:keys,selectionStyle:selectionStyle||"multi_explicit",onSelectChange:setSelection,selection:selection,showActions:showActions,sortable:sortable})}),DocsView_ref3]})};DocsView_DocsView.__docgenInfo={description:"",methods:[],displayName:"DocsView",props:{storeKey:{type:{name:"string"},required:!0,description:""},match:{type:{name:"object"},required:!0,description:""},history:{type:{name:"object"},required:!0,description:""},navigationStrategy:{type:{name:"object"},required:!1,description:""},domainTypes:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""},rootNodes:{type:{name:"arrayOf",value:{name:"shape",value:{entityName:{name:"string",required:!1},key:{name:"string",required:!1}}}},required:!1,description:""},changeListParent:{type:{name:"func"},required:!0,description:""},onSearchChange:{type:{name:"func"},required:!0,description:""},emitAction:{type:{name:"func"},required:!0,description:""},openFileDialog:{type:{name:"func"},required:!0,description:""},limit:{type:{name:"number"},required:!1,description:""},searchFormType:{type:{name:"custom",raw:"searchFormTypePropTypes"},required:!1,description:""},selectionStyle:{type:{name:"custom",raw:"selectionStylePropType"},required:!1,description:""},getCustomLocation:{type:{name:"func"},required:!1,description:""},disableViewPersistor:{type:{name:"bool"},required:!1,description:""},formName:{type:{name:"string"},required:!1,description:""},showActions:{type:{name:"bool"},required:!1,description:""},sortable:{type:{name:"bool"},required:!1,description:""},searchMode:{type:{name:"bool"},required:!1,description:""},openResource:{type:{name:"func"},required:!1,description:""}}};var components_DocsView_DocsView=DocsView_DocsView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/components/DocsView/DocsView.js"]={name:"DocsView",docgenInfo:DocsView_DocsView.__docgenInfo,path:"packages/docs-browser/src/components/DocsView/DocsView.js"});var DocsViewContainer_mapActionCreators={changeListParent:function changeListParent(parent){return{type:"docs/list/CHANGE_LIST_PARENT",payload:{parent:parent}}}},DocsViewContainer=Object(es.connect)((function mapStateToProps(state){return{domainTypes:state.input.domainTypes,rootNodes:state.input.rootNodes,limit:state.input.listLimit,searchFormType:state.input.searchFormType,selectionStyle:state.input.selectionStyle,getCustomLocation:state.input.getCustomLocation,disableViewPersistor:state.input.disableViewPersistor,formName:state.docs.list.formName,showActions:state.input.showActions,sortable:state.input.sortable,openResource:state.input.openResource}}),DocsViewContainer_mapActionCreators)(Object(index_es.injectIntl)(components_DocsView_DocsView));__webpack_require__(263),__webpack_require__(5004);function StyledComponents_templateObject(){var data=taggedTemplateLiteral_default()(["\n  height: 100%;\n  background-color: ",";\n  padding-left: ",";\n  overflow-y: hidden;\n"]);return StyledComponents_templateObject=function _templateObject(){return data},data}var StyledDocumentViewWrapper=styled_components_browser_esm.default.div(StyledComponents_templateObject(),resolveThemePath.a.color("paper"),modularScale.a.space(.5)),LazyDetailApp=react_default.a.lazy((function(){return Promise.all([__webpack_require__.e(0),__webpack_require__.e(30)]).then(__webpack_require__.bind(null,5147))})),DocumentView_ref2=Object(jsx_runtime.jsx)(LoadMask.a,{}),DocumentView_DocumentView=function DocumentView(_ref){var match=_ref.match,history=_ref.history,breadcrumbs=_ref.breadcrumbs,formName=_ref.formName,navigationStrategy=_ref.navigationStrategy,emitAction=_ref.emitAction;return Object(jsx_runtime.jsx)(StyledDocumentViewWrapper,{children:Object(jsx_runtime.jsx)(react.Suspense,{fallback:DocumentView_ref2,children:Object(jsx_runtime.jsx)(LazyDetailApp,{entityName:"Resource",entityId:match.params.key,formName:formName||"DmsResource",mode:"update",actionAppComponent:Action_LazyAction,navigationStrategy:navigationStrategy,emitAction:emitAction,onEntityDeleted:function handleEntityDeleted(){var lastList=breadcrumbs.slice().reverse().find((function(breadcrumb){return"list"===breadcrumb.type})),lastListUrl="/docs/".concat(lastList.path);history.push(lastListUrl)}})})})};DocumentView_DocumentView.displayName="DocumentView",DocumentView_DocumentView.__docgenInfo={description:"",methods:[],displayName:"DocumentView",props:{match:{type:{name:"shape",value:{params:{name:"shape",value:{key:{name:"string",required:!0}},required:!0}}},required:!0,description:""},history:{type:{name:"shape",value:{push:{name:"func",required:!0}}},required:!0,description:""},breadcrumbs:{type:{name:"arrayOf",value:{name:"shape",value:{path:{name:"string",required:!0},type:{name:"string",required:!0}}}},required:!0,description:""},formName:{type:{name:"string"},required:!1,description:""},navigationStrategy:{type:{name:"object"},required:!1,description:""},emitAction:{type:{name:"func"},required:!0,description:""}}};var components_DocumentView_DocumentView=DocumentView_DocumentView;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/components/DocumentView/DocumentView.js"]={name:"DocumentView",docgenInfo:DocumentView_DocumentView.__docgenInfo,path:"packages/docs-browser/src/components/DocumentView/DocumentView.js"});var DocumentViewContainer_mapActionCreators={emitAction:function emitAction(action){return actionEmitter.a.dispatchEmittedAction(action)}},DocumentViewContainer=Object(es.connect)((function mapStateToProps(state){return{breadcrumbs:state.docs.path.breadcrumbs,formName:state.input.documentDetailFormName}}),DocumentViewContainer_mapActionCreators)(Object(index_es.injectIntl)(components_DocumentView_DocumentView)),Breadcrumbs=__webpack_require__(5164),BreadcrumbsContainer=Object(es.connect)((function mapStateToProps(state){return{pathPrefix:"/docs",breadcrumbsInfo:state.docs.path.breadcrumbs}}),{})(Object(index_es.injectIntl)(Breadcrumbs.a)),StyledScrollbar=__webpack_require__(2139);function _templateObject3(){var data=taggedTemplateLiteral_default()(["\n  grid-area: breadcrumbs;\n  ","\n"]);return _templateObject3=function _templateObject3(){return data},data}function StyledComponents_templateObject2(){var data=taggedTemplateLiteral_default()(["\n  grid-area: content;\n  overflow-x: hidden;\n  ","\n"]);return StyledComponents_templateObject2=function _templateObject2(){return data},data}function DocsBrowser_StyledComponents_templateObject(){var data=taggedTemplateLiteral_default()(["\n  display: grid;\n  grid-template-rows: auto  1fr;\n  grid-template-areas:\n    'breadcrumbs'\n    'content';\n  height: 100%;\n  width: 100%;\n"]);return DocsBrowser_StyledComponents_templateObject=function _templateObject(){return data},data}var StyledWrapper=styled_components_browser_esm.default.div(DocsBrowser_StyledComponents_templateObject()),StyledContent=styled_components_browser_esm.default.div(StyledComponents_templateObject2(),StyledScrollbar.a),StyledBreadcrumbs=styled_components_browser_esm.default.div(_templateObject3(),(function(_ref){return _ref.noLeftPadding&&"\n    > div {\n      padding-left: 0;\n    }\n  "})),DocsBrowser_DocsBrowser=function DocsBrowser(_ref){var history=_ref.history,searchMode=_ref.searchMode,navigationStrategy=_ref.navigationStrategy,setSearchMode=_ref.setSearchMode,loadBreadcrumbs=_ref.loadBreadcrumbs,emitAction=_ref.emitAction,openFileDialog=_ref.openFileDialog,theme=_ref.theme,embedded=_ref.embedded,noLeftPadding=_ref.noLeftPadding,_useReducer=Object(react.useReducer)((function(x){return x+1}),0),_useReducer2=slicedToArray_default()(_useReducer,2),docsViewNumber=_useReducer2[0],forceDocsViewUpdate=_useReducer2[1],location=Object(react_router.h)();Object(react.useEffect)((function(){!0===searchMode&&"/docs/search"!==location.pathname&&(setSearchMode(!1),forceDocsViewUpdate()),!1===searchMode&&"/docs/search"===location.pathname&&(setSearchMode(!0),forceDocsViewUpdate()),loadBreadcrumbs(location.pathname)}));var handleSearchChange=function handleSearchChange(e){var hasUserChanges=e.query&&e.query.hasUserChanges;"/docs/search"!==history.location.pathname&&hasUserChanges?history.push("/docs/search",{userSearch:!0}):"/docs/search"!==history.location.pathname||hasUserChanges||history.push("/docs"),setSearchMode(hasUserChanges)},key="docs-view-".concat(docsViewNumber);return Object(jsx_runtime.jsxs)(StyledWrapper,{children:[Object(jsx_runtime.jsx)(StyledBreadcrumbs,{noLeftPadding:noLeftPadding,children:Object(jsx_runtime.jsx)(BreadcrumbsContainer,Object.assign({},embedded?{backgroundColor:resolveThemePath.a.color("paper")({theme:theme})}:{}))}),Object(jsx_runtime.jsx)(StyledContent,{children:Object(jsx_runtime.jsxs)(react_router.e,{children:[Object(jsx_runtime.jsx)(react_router.c,{exact:!0,path:"/docs/doc/:key/detail",render:function render(_ref2){var match=_ref2.match;return Object(jsx_runtime.jsx)(DocumentViewContainer,{match:match,history:history,navigationStrategy:navigationStrategy})}}),Object(jsx_runtime.jsx)(react_router.c,{exact:!0,path:["/docs/:model/:key/list","/docs","/docs/search"],render:function render(_ref3){var match=_ref3.match;return Object(jsx_runtime.jsx)(DocsViewContainer,{storeKey:key,history:history,match:match,navigationStrategy:navigationStrategy,onSearchChange:handleSearchChange,emitAction:emitAction,openFileDialog:openFileDialog,searchMode:searchMode},key)}})]})})]})};DocsBrowser_DocsBrowser.displayName="DocsBrowser",DocsBrowser_DocsBrowser.__docgenInfo={description:"",methods:[],displayName:"DocsBrowser",props:{loadBreadcrumbs:{type:{name:"func"},required:!0,description:""},setSearchMode:{type:{name:"func"},required:!0,description:""},emitAction:{type:{name:"func"},required:!0,description:""},openFileDialog:{type:{name:"func"},required:!0,description:""},history:{type:{name:"object"},required:!0,description:""},searchMode:{type:{name:"bool"},required:!0,description:""},navigationStrategy:{type:{name:"object"},required:!1,description:""},embedded:{type:{name:"bool"},required:!1,description:""},theme:{type:{name:"object"},required:!1,description:""},noLeftPadding:{type:{name:"bool"},required:!1,description:""}}};var components_DocsBrowser_DocsBrowser=Object(styled_components_browser_esm.withTheme)(DocsBrowser_DocsBrowser);"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/components/DocsBrowser/DocsBrowser.js"]={name:"DocsBrowser",docgenInfo:DocsBrowser_DocsBrowser.__docgenInfo,path:"packages/docs-browser/src/components/DocsBrowser/DocsBrowser.js"});var setBreadcrumbs=function setBreadcrumbs(breadcrumbs){return{type:"docs/path/SET_BREADCRUMBS",payload:{breadcrumbs:breadcrumbs}}},DocsBrowserContainer_mapActionCreators={loadBreadcrumbs:function loadBreadcrumbs(location){return{type:"docs/path/LOAD_BREADCRUMBS",payload:{location:location}}},setSearchMode:function setSearchMode(searchMode){return{type:"docs/path/SET_SEARCH_MODE",payload:{searchMode:searchMode}}},emitAction:function emitAction(action){return actionEmitter.a.dispatchEmittedAction(action)},openFileDialog:function openDialog(location,directory,onSuccess,onError){return{type:"docs/create/OPEN_DIALOG",payload:{location:location,directory:directory,onSuccess:onSuccess,onError:onError}}}},DocsBrowserContainer=Object(es.connect)((function mapStateToProps(state){return{searchMode:state.docs.path.searchMode,navigationStrategy:state.input.navigationStrategy,embedded:state.input.embedded,noLeftPadding:state.input.noLeftPadding}}),DocsBrowserContainer_mapActionCreators)(Object(index_es.injectIntl)(components_DocsBrowser_DocsBrowser)),redux=__webpack_require__(81),redux_saga_effects_npm_proxy_esm=__webpack_require__(2),getNode=__webpack_require__(4969),_marked=regenerator_default.a.mark(getSearchBreadcrumbs),_marked2=regenerator_default.a.mark(sagas_loadBreadcrumbs),_marked3=regenerator_default.a.mark(getRootNodesParam),_marked4=regenerator_default.a.mark(mainSagas),textResourceSelector=function textResourceSelector(state,key){return state.intl.messages[key]||key},docsPathSelector=function docsPathSelector(state){return state.docs.path},rootNodesSelector=function rootNodesSelector(state){return state.input.rootNodes};function getSearchBreadcrumbs(){return regenerator_default.a.wrap((function getSearchBreadcrumbs$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(textResourceSelector,"client.docs-browser.breadcrumbs.start");case 2:return _context.t0=_context.sent,_context.t1={display:_context.t0,path:"",type:"list"},_context.next=6,Object(redux_saga_effects_npm_proxy_esm.f)(textResourceSelector,"client.docs-browser.breadcrumbs.searchResults");case 6:return _context.t2=_context.sent,_context.t3={display:_context.t2,path:"",type:"list"},_context.abrupt("return",[_context.t1,_context.t3]);case 9:case"end":return _context.stop()}}),_marked)}function sagas_loadBreadcrumbs(_ref){var location,node,breadcrumbs,url,options,result;return regenerator_default.a.wrap((function loadBreadcrumbs$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return location=_ref.payload.location,node=Object(getNode.a)(location),_context2.next=4,Object(redux_saga_effects_npm_proxy_esm.f)(docsPathSelector);case 4:if(!_context2.sent.searchMode||node&&"Resource"===node.model){_context2.next=11;break}return _context2.next=8,Object(redux_saga_effects_npm_proxy_esm.b)(getSearchBreadcrumbs);case 8:breadcrumbs=_context2.sent,_context2.next=21;break;case 11:return url=node?"documents/".concat(node.model,"/").concat(node.key,"/breadcrumbs"):"documents/breadcrumbs",_context2.next=14,Object(redux_saga_effects_npm_proxy_esm.b)(getRootNodesParam);case 14:return _context2.t0=_context2.sent,_context2.t1={rootnodes:_context2.t0},options={queryParams:_context2.t1},_context2.next=19,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,url,options);case 19:result=_context2.sent,breadcrumbs=result.body.breadcrumbs;case 21:return _context2.next=23,Object(redux_saga_effects_npm_proxy_esm.e)(setBreadcrumbs(breadcrumbs));case 23:case"end":return _context2.stop()}}),_marked2)}function getRootNodesParam(){var rootNodes;return regenerator_default.a.wrap((function getRootNodesParam$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(rootNodesSelector);case 2:return rootNodes=_context3.sent,_context3.abrupt("return",Array.isArray(rootNodes)&&rootNodes.length>0?rootNodes.map((function(node){return"".concat(node.entityName,"/").concat(node.key)})).join(","):null);case 4:case"end":return _context3.stop()}}),_marked3)}function mainSagas(){return regenerator_default.a.wrap((function mainSagas$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)("docs/path/LOAD_BREADCRUMBS",sagas_loadBreadcrumbs)]);case 2:case"end":return _context4.stop()}}),_marked4)}var _ACTION_HANDLERS,defineProperty=__webpack_require__(8),defineProperty_default=__webpack_require__.n(defineProperty),ACTION_HANDLERS=(_ACTION_HANDLERS={},defineProperty_default()(_ACTION_HANDLERS,"docs/path/SET_BREADCRUMBS",reducer.a.singleTransferReducer("breadcrumbs")),defineProperty_default()(_ACTION_HANDLERS,"docs/path/SET_SEARCH_MODE",reducer.a.singleTransferReducer("searchMode")),_ACTION_HANDLERS),initialState={breadcrumbs:[],searchMode:!1};function reducer_reducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments.length>1?arguments[1]:void 0,handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state}reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/modules/path/reducer.js"]={name:"reducer",docgenInfo:reducer_reducer.__docgenInfo,path:"packages/docs-browser/src/modules/path/reducer.js"});var path_marked=regenerator_default.a.mark(sagas);function sagas(){return regenerator_default.a.wrap((function sagas$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.d)(mainSagas)]);case 2:case"end":return _context.stop()}}),path_marked)}var path=reducer_reducer,v4=(__webpack_require__(78),__webpack_require__(362),__webpack_require__(175),__webpack_require__(185),__webpack_require__(410),__webpack_require__(83),__webpack_require__(1344));function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var sagas_marked=regenerator_default.a.mark(handleFilesSelected),sagas_marked2=regenerator_default.a.mark(createDocuments),sagas_marked3=regenerator_default.a.mark(sagas_mainSagas),dialogSelector=function dialogSelector(state){return state.docs.create.dialog},sagas_textResourceSelector=function textResourceSelector(state,key){return state.intl.messages[key]};function handleFilesSelected(_ref){var _ref$payload,files,isDirectory,blockingInfoId,_yield$select,location,onSuccess,onError,response,remoteEvents,msgId;return regenerator_default.a.wrap((function handleFilesSelected$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _ref$payload=_ref.payload,files=_ref$payload.files,isDirectory=_ref$payload.isDirectory,_context.next=3,Object(redux_saga_effects_npm_proxy_esm.b)(v4.a);case 3:return blockingInfoId=_context.sent,_context.next=6,Object(redux_saga_effects_npm_proxy_esm.e)(notifier.a.blockingInfo(blockingInfoId,isDirectory?"client.docs-browser.uploadInProgressDirectory":files.length>1?"client.docs-browser.uploadInProgressMultiple":"client.docs-browser.uploadInProgress",null));case 6:return _context.next=8,Object(redux_saga_effects_npm_proxy_esm.f)(dialogSelector);case 8:return _yield$select=_context.sent,location=_yield$select.location,onSuccess=_yield$select.onSuccess,onError=_yield$select.onError,_context.prev=12,_context.next=15,Object(redux_saga_effects_npm_proxy_esm.b)(createDocuments,location,files);case 15:return response=_context.sent,remoteEvents=[{type:"entity-create-event",payload:{entities:response.body.items.filter((function(item){return 201===item.status})).map((function(item){return{entityName:item.bean.model,key:item.bean.key}}))}}],_context.next=19,Object(redux_saga_effects_npm_proxy_esm.e)(notifier.a.removeBlockingInfo(blockingInfoId));case 19:return msgId=isDirectory?"client.docs-browser.uploadSuccessfulDirectory":"client.docs-browser.uploadSuccessful",_context.t0=onSuccess,_context.next=23,Object(redux_saga_effects_npm_proxy_esm.f)(sagas_textResourceSelector,msgId);case 23:_context.t1=_context.sent,_context.t2=remoteEvents,_context.t3={message:_context.t1,remoteEvents:_context.t2},(0,_context.t0)(_context.t3),_context.next=40;break;case 29:return _context.prev=29,_context.t4=_context.catch(12),consoleLogger.a.logError("Failed to upload files",_context.t4),_context.next=34,Object(redux_saga_effects_npm_proxy_esm.e)(notifier.a.removeBlockingInfo(blockingInfoId));case 34:return _context.t5=onError,_context.next=37,Object(redux_saga_effects_npm_proxy_esm.f)(sagas_textResourceSelector,"client.docs-browser.uploadFailed");case 37:_context.t6=_context.sent,_context.t7={message:_context.t6},(0,_context.t5)(_context.t7);case 40:case"end":return _context.stop()}}),sagas_marked,null,[[12,29]])}function createDocuments(location,files){var node,formData,_iterator,_step,_file,resource,options;return regenerator_default.a.wrap((function createDocuments$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(node=Object(getNode.a)(location)){_context2.next=3;break}return _context2.abrupt("return");case 3:formData=new FormData,_iterator=_createForOfIteratorHelper(files);try{for(_iterator.s();!(_step=_iterator.n()).done;)_file=_step.value,formData.append("files",_file)}catch(err){_iterator.e(err)}finally{_iterator.f()}return resource="documents/".concat(node.model,"/").concat(node.key),options={method:"POST",body:formData},_context2.next=10,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,resource,options);case 10:return _context2.abrupt("return",_context2.sent);case 11:case"end":return _context2.stop()}}),sagas_marked2)}function sagas_mainSagas(){return regenerator_default.a.wrap((function mainSagas$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.i)("docs/create/FILES_SELECTED",handleFilesSelected)]);case 2:case"end":return _context3.stop()}}),sagas_marked3)}var reducer_ACTION_HANDLERS=defineProperty_default()({},"docs/create/OPEN_DIALOG",(function openDialog(state,_ref){var _ref$payload=_ref.payload,location=_ref$payload.location,directory=_ref$payload.directory,onSuccess=_ref$payload.onSuccess,onError=_ref$payload.onError;return Object.assign({},state,{dialog:{instanceCount:state.dialog.instanceCount+1,directory:directory,location:location,onSuccess:onSuccess,onError:onError}})})),reducer_initialState={dialog:{instanceCount:0,directory:!1,location:null,onSuccess:null,onError:null}};function create_reducer_reducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:reducer_initialState,action=arguments.length>1?arguments[1]:void 0,handler=reducer_ACTION_HANDLERS[action.type];return handler?handler(state,action):state}create_reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/modules/create/reducer.js"]={name:"reducer",docgenInfo:create_reducer_reducer.__docgenInfo,path:"packages/docs-browser/src/modules/create/reducer.js"});var create_marked=regenerator_default.a.mark(create_sagas);function create_sagas(){return regenerator_default.a.wrap((function sagas$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.d)(sagas_mainSagas)]);case 2:case"end":return _context.stop()}}),create_marked)}var create=create_reducer_reducer,list_sagas_marked=regenerator_default.a.mark(sagas_changeListParent),list_sagas_marked2=regenerator_default.a.mark(list_sagas_mainSagas);function sagas_changeListParent(_ref){var payload;return regenerator_default.a.wrap((function changeListParent$(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload=_ref.payload,_context.next=3,Object(redux_saga_effects_npm_proxy_esm.e)(externalEvents.a.fireExternalEvent("onListParentChange",payload.parent));case 3:case"end":return _context.stop()}}),list_sagas_marked)}function list_sagas_mainSagas(){return regenerator_default.a.wrap((function mainSagas$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)("docs/list/CHANGE_LIST_PARENT",sagas_changeListParent)]);case 2:case"end":return _context2.stop()}}),list_sagas_marked2)}var list_reducer_ACTION_HANDLERS=defineProperty_default()({},"docs/list/SET_FORM_NAME",reducer.a.singleTransferReducer("formName")),list_reducer_initialState={formName:null};function list_reducer_reducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:list_reducer_initialState,action=arguments.length>1?arguments[1]:void 0,handler=list_reducer_ACTION_HANDLERS[action.type];return handler?handler(state,action):state}list_reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/modules/list/reducer.js"]={name:"reducer",docgenInfo:list_reducer_reducer.__docgenInfo,path:"packages/docs-browser/src/modules/list/reducer.js"});var move_reducer_ACTION_HANDLERS,list=list_reducer_reducer,validation=__webpack_require__(2187),move_actions=__webpack_require__(4978),move_sagas_marked=regenerator_default.a.mark(moveElements),move_sagas_marked2=regenerator_default.a.mark(setDone),move_sagas_marked3=regenerator_default.a.mark(move_sagas_mainSagas),inputSelector=function inputSelector(state){return state.docs.move.input},move_sagas_textResourceSelector=function textResourceSelector(state,key){return state.intl.messages[key]};function moveElements(_ref){var payload,resource,options,response,message;return regenerator_default.a.wrap((function moveElements$(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload=_ref.payload,resource="documents/move",options={method:"POST",acceptedStatusCodes:[400],body:{targetEntityKey:payload.target,selectedEntityKeys:payload.selected}},_context.next=5,Object(redux_saga_effects_npm_proxy_esm.e)(move_actions.h(!0));case 5:return _context.next=7,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,resource,options);case 7:if(204!==(response=_context.sent).status){_context.next=13;break}return _context.next=11,Object(redux_saga_effects_npm_proxy_esm.b)(setDone);case 11:_context.next=19;break;case 13:return _context.next=15,Object(redux_saga_effects_npm_proxy_esm.e)(move_actions.h(!1));case 15:return message="client.actions.dms-move.failed.message","VALIDATION_FAILED"===response.body.errorCode&&(message=validation.a.getErrorCompact(response.body.errors)),_context.next=19,Object(redux_saga_effects_npm_proxy_esm.e)(notifier.a.info("error","client.actions.dms-move.failed.title",message,"exclamation"));case 19:case"end":return _context.stop()}}),move_sagas_marked)}function setDone(){var _yield$select,selection,onSuccess,remoteEvents;return regenerator_default.a.wrap((function setDone$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(inputSelector);case 2:return _yield$select=_context2.sent,selection=_yield$select.selection,onSuccess=_yield$select.onSuccess,remoteEvents=[{type:"entity-update-event",payload:{entities:selection.ids.map((function(id){return{entityName:"Docs_list_item",key:id}}))}}],_context2.t0=onSuccess,_context2.next=9,Object(redux_saga_effects_npm_proxy_esm.f)(move_sagas_textResourceSelector,"client.docs-browser.moveSuccessful");case 9:return _context2.t1=_context2.sent,_context2.t2=remoteEvents,_context2.t3={message:_context2.t1,remoteEvents:_context2.t2},(0,_context2.t0)(_context2.t3),_context2.next=15,Object(redux_saga_effects_npm_proxy_esm.e)(move_actions.e());case 15:case"end":return _context2.stop()}}),move_sagas_marked2)}function move_sagas_mainSagas(){return regenerator_default.a.wrap((function mainSagas$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)(move_actions.c,moveElements)]);case 2:case"end":return _context3.stop()}}),move_sagas_marked3)}var modules_move_reducer_ACTION_HANDLERS=(move_reducer_ACTION_HANDLERS={},defineProperty_default()(move_reducer_ACTION_HANDLERS,move_actions.b,(function initialize(state,_ref){var _ref$payload=_ref.payload,selection=_ref$payload.selection,onSuccess=_ref$payload.onSuccess,onError=_ref$payload.onError;return Object.assign({},state,{input:{selection:selection,onSuccess:onSuccess,onError:onError}})})),defineProperty_default()(move_reducer_ACTION_HANDLERS,move_actions.d,reducer.a.singleTransferReducer("isWaiting")),defineProperty_default()(move_reducer_ACTION_HANDLERS,move_actions.a,(function close(){return Object.assign({},move_reducer_initialState)})),move_reducer_ACTION_HANDLERS),move_reducer_initialState={isWaiting:!1,input:{selection:null,onSuccess:null,onError:null}};function move_reducer_reducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:move_reducer_initialState,action=arguments.length>1?arguments[1]:void 0,handler=modules_move_reducer_ACTION_HANDLERS[action.type];return handler?handler(state,action):state}move_reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/modules/move/reducer.js"]={name:"reducer",docgenInfo:move_reducer_reducer.__docgenInfo,path:"packages/docs-browser/src/modules/move/reducer.js"});var move_marked=regenerator_default.a.mark(move_sagas);function move_sagas(){return regenerator_default.a.wrap((function sagas$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.d)(move_sagas_mainSagas)]);case 2:case"end":return _context.stop()}}),move_marked)}var move=move_reducer_reducer,reducers={docs:Object(redux.combineReducers)({path:path,create:create,list:list,move:move})},reducers_sagas=[sagas,create_sagas,list_sagas_mainSagas,move_sagas],toConsumableArray=__webpack_require__(24),toConsumableArray_default=__webpack_require__.n(toConsumableArray),input_getDispatchActions=function getDispatchActions(input){return actionSettings.reduce((function(acc,actionSetting){return function isDefined(value){return void 0!==value}(input[actionSetting.name])&&acc.push(actionSetting.action.apply(actionSetting,toConsumableArray_default()(actionSetting.argsFactory(input)))),acc}),[])},actionSettings=[{name:"listFormName",action:function setFormName(formName){return{type:"docs/list/SET_FORM_NAME",payload:{formName:formName}}},argsFactory:function argsFactory(input){return[input.listFormName]}}];function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=getPrototypeOf_default()(Derived);if(hasNativeReflectConstruct){var NewTarget=getPrototypeOf_default()(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return possibleConstructorReturn_default()(this,result)}}var EXTERNAL_EVENTS=["onListParentChange","openResource"],main_textResourceSelector=function textResourceSelector(state,key){return state.intl.messages[key]||key},main_createHistory=function createHistory(store,memoryHistory){return(memoryHistory?createMemoryHistory_default.a:createHashHistory_default.a)({getUserConfirmation:function getUserConfirmation(message,confirmCallback){var state=store.getState(),okText=main_textResourceSelector(state,"client.common.ok"),cancelText=main_textResourceSelector(state,"client.common.cancel"),action=notifier.a.confirm("",message,okText,cancelText,(function(){return confirmCallback(!0)}),(function(){return confirmCallback(!1)}));store.dispatch(action)}})},main_ref=Object(jsx_runtime.jsx)(notifier.a.Notifier,{}),main_initApp=function initApp(id,input){var events=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},publicPath=arguments.length>3?arguments[3]:void 0,store=appFactory.a.createStore(reducers,reducers_sagas,input,"docs-browser");externalEvents.a.addToStore(store,events),actionEmitter.a.addToStore(store),errorLogging.a.addToStore(store,!0,["console","remote","notifier"]);var handleNotifications=!events.emitAction;notifier.a.addToStore(store,handleNotifications),input.businessUnit&&rest.a.setBusinessUnit(input.businessUnit);var history=input.history||main_createHistory(store,input.memoryHistory);input.initialLocation&&history.push(input.initialLocation);var singleRootNode=Array.isArray(input.rootNodes)&&1===input.rootNodes.length&&"Resource"!==input.rootNodes[0].entityName?input.rootNodes[0]:null,startUrl=singleRootNode?"/docs/".concat(singleRootNode.entityName.toLowerCase(),"/").concat(singleRootNode.key,"/list"):"/docs",content=Object(jsx_runtime.jsxs)(react_router.d,{history:history,children:[handleNotifications&&main_ref,Object(jsx_runtime.jsx)(DocsBrowserContainer,{history:history}),Object(jsx_runtime.jsx)(react_router.c,{exact:!0,path:"/",children:Object(jsx_runtime.jsx)(react_router.b,{to:startUrl})}),singleRootNode&&Object(jsx_runtime.jsx)(react_router.c,{exact:!0,path:"/docs",children:Object(jsx_runtime.jsx)(react_router.b,{to:startUrl})})]});return appFactory.a.createApp("docs-browser",content,store,{input:input,events:events,actions:input_getDispatchActions(input),publicPath:publicPath,textResourceModules:["component","common","actions","entity-list","entity-detail","docs-browser"]})},main_DocsBrowserApp=function(_React$Component){inherits_default()(DocsBrowserApp,_React$Component);var _super=_createSuper(DocsBrowserApp);function DocsBrowserApp(props){var _this;classCallCheck_default()(this,DocsBrowserApp),_this=_super.call(this,props);var events=EXTERNAL_EVENTS.reduce((function(events,event){return props[event]&&(events[event]=props[event]),events}),{});return _this.app=main_initApp("docs-browser",props,events),_this}return createClass_default()(DocsBrowserApp,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this2=this,changedProps=pickBy_default()(this.props,(function(value,key){return!isEqual_default()(value,prevProps[key])}));isEmpty_default()(changedProps)||input_getDispatchActions(changedProps).forEach((function(action){_this2.app.store.dispatch(action)}))}},{key:"render",value:function render(){return this.app.component}}]),DocsBrowserApp}(react_default.a.Component);main_DocsBrowserApp.__docgenInfo={description:"",methods:[],displayName:"DocsBrowserApp",props:{history:{type:{name:"object"},required:!1,description:""},navigationStrategy:{type:{name:"object"},required:!1,description:""},domainTypes:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""},rootNodes:{type:{name:"arrayOf",value:{name:"shape",value:{entityName:{name:"string",required:!1},key:{name:"string",required:!1}}}},required:!1,description:""},initialLocation:{type:{name:"string"},required:!1,description:""},listLimit:{type:{name:"number"},required:!1,description:""},documentDetailFormName:{type:{name:"string"},required:!1,description:""},searchFormType:{type:{name:"custom",raw:"searchFormTypePropTypes"},required:!1,description:""},selectionStyle:{type:{name:"custom",raw:"selectionStylePropType"},required:!1,description:""},listFormName:{type:{name:"string"},required:!1,description:""},memoryHistory:{type:{name:"bool"},required:!1,description:""},disableViewPersistor:{type:{name:"bool"},required:!1,description:""},getCustomLocation:{type:{name:"func"},required:!1,description:""}}};__webpack_exports__.a=main_DocsBrowserApp;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/docs-browser/src/main.js"]={name:"DocsBrowserApp",docgenInfo:main_DocsBrowserApp.__docgenInfo,path:"packages/docs-browser/src/main.js"})},5163:function(module,__webpack_exports__,__webpack_require__){"use strict";var taggedTemplateLiteral=__webpack_require__(10),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),react_router_dom=__webpack_require__(4954),styled_components_browser_esm=__webpack_require__(5),get=__webpack_require__(35),get_default=__webpack_require__.n(get),declareFont=__webpack_require__(72),resolveThemePath=__webpack_require__(34),declareInteractionColors=__webpack_require__(238);function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  ","\n  text-decoration: none;\n  color: ",";\n\n  * {\n    color: ",";\n    text-decoration: none;\n  }\n\n  &:hover,\n  &:hover *,\n  &:focus,\n  &:focus * {\n    color: ",";\n    text-decoration: ",";\n  }\n\n  &:active,\n  &:active * {\n    color: ",";\n    text-decoration: ",";\n  }\n"]);return _templateObject=function _templateObject(){return data},data}var linkStyle=Object(styled_components_browser_esm.css)(_templateObject(),Object(declareFont.a)(),resolveThemePath.a.color("text"),resolveThemePath.a.color("text"),resolveThemePath.a.color("secondaryLight"),(function(props){return props.neutral?"none":"underline"}),(function(props){return props.neutral?Object(declareInteractionColors.f)(get_default()(props.theme,"colors.text"),2):Object(declareInteractionColors.f)(get_default()(props.theme,"colors.primary"),2)}),(function(props){return props.neutral?"none":"underline"}));function StyledLink_templateObject(){var data=taggedTemplateLiteral_default()(["\n  ","\n"]);return StyledLink_templateObject=function _templateObject(){return data},data}__webpack_exports__.a=Object(styled_components_browser_esm.default)(react_router_dom.a)(StyledLink_templateObject(),linkStyle)},5164:function(module,__webpack_exports__,__webpack_require__){"use strict";var toConsumableArray=__webpack_require__(162),toConsumableArray_default=__webpack_require__.n(toConsumableArray),Helmet=(__webpack_require__(145),__webpack_require__(5004),__webpack_require__(28),__webpack_require__(240),__webpack_require__(32),__webpack_require__(77),__webpack_require__(12),__webpack_require__(0),__webpack_require__(9),__webpack_require__(5118)),LazyIcon=__webpack_require__(686),Typography=__webpack_require__(16),taggedTemplateLiteral=__webpack_require__(10),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),styled_components_browser_esm=__webpack_require__(5),StyledLink=__webpack_require__(5163),resolveThemePath=__webpack_require__(34);function _templateObject3(){var data=taggedTemplateLiteral_default()(["\n  font-weight: ",";\n  text-decoration: none;\n  color: ",";\n\n  & * {\n    font-weight: ",";\n    text-decoration: none;\n    color: ",";\n    margin-right: .5rem;\n  }\n\n  &:active * {\n    color: ",";\n  }\n"]);return _templateObject3=function _templateObject3(){return data},data}function _templateObject2(){var data=taggedTemplateLiteral_default()(["\n  font-weight: ",";\n  text-decoration: none;\n  color: ",";\n\n  & * {\n    font-weight: ",";\n    text-decoration: none;\n    color: ",";\n    margin-right: .5rem;\n  }\n\n  &:hover,\n  &:hover *  {\n    color: ",";\n  }\n\n  &:focus,\n  &:active,\n  &:focus *,\n  &:active * {\n    color: ",";\n  }\n"]);return _templateObject2=function _templateObject2(){return data},data}function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  background-color: ",";\n  width: 100%;\n  padding: .8rem 1.7rem;\n  position: relative;\n  z-index: 2; // higher than StyledTether to prevent cover on scroll\n\n  span:nth-child(even) {\n    margin-left: .9rem;\n    margin-right: .9rem;\n  }\n"]);return _templateObject=function _templateObject(){return data},data}var StyledBreadcrumbs=styled_components_browser_esm.default.div(_templateObject(),(function(props){return props.backgroundColor||resolveThemePath.a.color("backgroundBreadcrumbs")(props)})),StyledBreadcrumbsLink=Object(styled_components_browser_esm.default)(StyledLink.a)(_templateObject2(),resolveThemePath.a.fontWeight("bold"),(function(_ref){return _ref.active&&resolveThemePath.a.color("primary")}),resolveThemePath.a.fontWeight("bold"),(function(_ref2){return _ref2.active&&resolveThemePath.a.color("primary")}),resolveThemePath.a.color("secondaryLight"),resolveThemePath.a.color("primary")),StyledBreadcrumbsTitle=styled_components_browser_esm.default.span(_templateObject3(),resolveThemePath.a.fontWeight("bold"),(function(_ref3){return _ref3.active&&resolveThemePath.a.color("primary")}),resolveThemePath.a.fontWeight("bold"),(function(_ref4){return _ref4.active&&resolveThemePath.a.color("primary")}),resolveThemePath.a.color("primary")),jsx_runtime=__webpack_require__(1),getTitle=function getTitle(breadcrumbsInfo){return breadcrumbsInfo.slice(breadcrumbsInfo.length-2).map((function(breadcrumb){return breadcrumb.display})).reverse().join(" - ")},Breadcrumbs_ref2=Object(jsx_runtime.jsx)(LazyIcon.a,{icon:"list"}),Breadcrumbs_ref3=Object(jsx_runtime.jsx)(LazyIcon.a,{icon:"chevron-right"}),Breadcrumbs_Breadcrumbs=function Breadcrumbs(_ref){var pathPrefix=_ref.pathPrefix,breadcrumbsInfo=_ref.breadcrumbsInfo,currentViewTitle=_ref.currentViewTitle,backgroundColor=_ref.backgroundColor,breadcrumbs=[].concat(toConsumableArray_default()(breadcrumbsInfo||[]),toConsumableArray_default()(currentViewTitle?[{display:currentViewTitle}]:[]));return 0===breadcrumbs.length?null:Object(jsx_runtime.jsxs)(StyledBreadcrumbs,{backgroundColor:backgroundColor,children:[Object(jsx_runtime.jsx)(Helmet.Helmet,{defer:!1,children:Object(jsx_runtime.jsx)("title",{children:getTitle(breadcrumbsInfo)})}),Object(jsx_runtime.jsxs)("div",{children:["  ",breadcrumbs.map((function(b,idx){var display=b.display||"",Comp=idx===breadcrumbs.length-1?StyledBreadcrumbsTitle:StyledBreadcrumbsLink;return Object(jsx_runtime.jsx)(Typography.a.Span,{children:Object(jsx_runtime.jsxs)(Comp,Object.assign({neutral:"true"},idx===breadcrumbs.length-1&&{active:"true"},{to:"".concat(pathPrefix,"/").concat(b.path),children:["list"===b.type&&Breadcrumbs_ref2," ",display]}))},"breadcrumbItem-".concat(idx))})).reduce((function(prev,curr,idx){return[prev,Object(jsx_runtime.jsxs)(Typography.a.Span,{children:[" ",Breadcrumbs_ref3," "]},"icon"+idx),curr]}))]})]})};Breadcrumbs_Breadcrumbs.displayName="Breadcrumbs",Breadcrumbs_Breadcrumbs.defaultProps={pathPrefix:""},Breadcrumbs_Breadcrumbs.__docgenInfo={description:"",methods:[],displayName:"Breadcrumbs",props:{pathPrefix:{defaultValue:{value:"''",computed:!1},type:{name:"string"},required:!1,description:""},match:{type:{name:"object"},required:!1,description:""},breadcrumbsInfo:{type:{name:"arrayOf",value:{name:"shape",value:{display:{name:"string",required:!1},path:{name:"string",required:!1},type:{name:"string",required:!1}}}},required:!1,description:""},currentViewTitle:{type:{name:"string"},required:!1,description:""},backgroundColor:{type:{name:"string"},required:!1,description:""}}};__webpack_exports__.a=Breadcrumbs_Breadcrumbs;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/tocco-ui/src/Breadcrumbs/Breadcrumbs.js"]={name:"Breadcrumbs",docgenInfo:Breadcrumbs_Breadcrumbs.__docgenInfo,path:"packages/tocco-ui/src/Breadcrumbs/Breadcrumbs.js"})}}]);