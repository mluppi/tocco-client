(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{2367:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var tocco_input_edit_src_main__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(599);__webpack_require__.d(__webpack_exports__,"default",(function(){return tocco_input_edit_src_main__WEBPACK_IMPORTED_MODULE_0__.a}))},2368:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(24),__webpack_require__(66),__webpack_require__(184);var react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),tocco_resource_scheduler_src_main__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(955),_utils_routing__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(1036),__webpack_require__(2301)),ResourceScheduler=function(_ref){var match=_ref.match,entityBaseUrl=Object(_utils_routing__WEBPACK_IMPORTED_MODULE_6__.a)(match.url,2);return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(tocco_resource_scheduler_src_main__WEBPACK_IMPORTED_MODULE_4__.b,{onEventClick:function onEventClick(_ref2){var model=_ref2.model,key=_ref2.key;window.open("".concat(entityBaseUrl,"/").concat(model,"/").concat(key),"_blank")}})};ResourceScheduler.displayName="ResourceScheduler",ResourceScheduler.__docgenInfo={description:"",methods:[],displayName:"ResourceScheduler",props:{match:{type:{name:"shape",value:{url:{name:"string",required:!1}}},required:!0,description:""}}},__webpack_exports__.default=ResourceScheduler,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/admin/src/routes/entities/components/Action/actions/ResourceScheduler.js"]={name:"ResourceScheduler",docgenInfo:ResourceScheduler.__docgenInfo,path:"packages/admin/src/routes/entities/components/Action/actions/ResourceScheduler.js"})},2369:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(66),__webpack_require__(184);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),react_router_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(357),_utils_routing__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(1036),__webpack_require__(2301)),CashManagement=function(props){var entityBaseUrl=Object(_utils_routing__WEBPACK_IMPORTED_MODULE_5__.a)(props.match.url,2);return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_3__.b,{to:entityBaseUrl+"/Cash_management_import/list?formName=Cash_management_import_action"})};CashManagement.displayName="CashManagement",CashManagement.__docgenInfo={description:"",methods:[],displayName:"CashManagement",props:{match:{type:{name:"shape",value:{url:{name:"string",required:!1}}},required:!0,description:""}}},__webpack_exports__.default=CashManagement,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/admin/src/routes/entities/components/Action/actions/CashManagementImport.js"]={name:"CashManagement",docgenInfo:CashManagement.__docgenInfo,path:"packages/admin/src/routes/entities/components/Action/actions/CashManagementImport.js"})},2375:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),reducer=__webpack_require__(28),src_selection=__webpack_require__(2302),appFactory=__webpack_require__(72),root=__webpack_require__(100),defineProperty=__webpack_require__(4),defineProperty_default=__webpack_require__.n(defineProperty),ACTION_HANDLERS=defineProperty_default()({},"delete/SET_DELETE_DIALOG_INFO",reducer.a.singleTransferReducer("dialogInfo")),initialState={dialogInfo:null};function reducer_reducer(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,action=1<arguments.length?arguments[1]:void 0,handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state}reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/delete/src/modules/delete/reducer.js"]={name:"reducer",docgenInfo:reducer_reducer.__docgenInfo,path:"packages/delete/src/modules/delete/reducer.js"});__webpack_require__(61),__webpack_require__(41),__webpack_require__(65);var regenerator=__webpack_require__(2),regenerator_default=__webpack_require__.n(regenerator),redux_saga_effects_npm_proxy_esm=(__webpack_require__(56),__webpack_require__(1)),rest=__webpack_require__(40),toConsumableArray=(__webpack_require__(18),__webpack_require__(24),__webpack_require__(32),__webpack_require__(146),__webpack_require__(21),__webpack_require__(173),__webpack_require__(83),__webpack_require__(31),__webpack_require__(26),__webpack_require__(33),__webpack_require__(34),__webpack_require__(17),__webpack_require__(596),__webpack_require__(79),__webpack_require__(22),__webpack_require__(36)),toConsumableArray_default=__webpack_require__.n(toConsumableArray),get=__webpack_require__(27),get_default=__webpack_require__.n(get),prop_types=__webpack_require__(10),prop_types_default=__webpack_require__.n(prop_types);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var deleteStatus_DELETABLE="DELETABLE",deleteRequestParser=function(response,currentBuId){var entitiesToDelete=response.entitiesToDelete;return entitiesToDelete.reduce((function(acc,entityToDelete){var _objectSpread3,deletable=function(entityToDelete){return entityToDelete.rootEntity.deleteStatus===deleteStatus_DELETABLE&&!entityToDelete.affectedEntities.find((function(affectedEntity){return affectedEntity.deleteStatus!==deleteStatus_DELETABLE}))}(entityToDelete),delAttr=deletable?"deletable":"notDeletable",relatedAttr=deletable?"deletableRelated":"notDeletableRelated";return _objectSpread({},acc,(_objectSpread3={},defineProperty_default()(_objectSpread3,delAttr,[].concat(toConsumableArray_default()(acc[delAttr]),[entityToDelete.rootEntity.pk])),defineProperty_default()(_objectSpread3,relatedAttr,function(notDeletableRelated,entityToDelete,currentBuId){return _objectSpread({},entityToDelete.affectedEntities.reduce((function(acc,affectedEntity){return _objectSpread({},acc,defineProperty_default()({},affectedEntity.entityModel,_objectSpread({},get_default()(acc,affectedEntity.entityModel,{pks:[],pksOtherBu:[],entityName:affectedEntity.entityName}),{},null===affectedEntity.businessUnitId||affectedEntity.businessUnitId===currentBuId?{pks:Array.from(new Set([].concat(toConsumableArray_default()(get_default()(acc,[affectedEntity.entityModel,"pks"],[])),[affectedEntity.pk])))}:{pksOtherBu:Array.from(new Set([].concat(toConsumableArray_default()(get_default()(acc,[affectedEntity.entityModel,"pksOtherBu"],[])),[affectedEntity.pk])))})))}),_objectSpread({},notDeletableRelated)))}(acc[relatedAttr],entityToDelete,currentBuId)),_objectSpread3))}),{entityModel:get_default()(entitiesToDelete,"[0].rootEntity.entityModel"),entityName:get_default()(entitiesToDelete,"[0].rootEntity.entityName"),deletable:[],notDeletable:[],deletableRelated:{},notDeletableRelated:{},unreadableEntities:!!entitiesToDelete.find((function(e){return e.unreadableEntities}))})},relatedPropTypes=prop_types_default.a.objectOf(prop_types_default.a.shape({entityName:prop_types_default.a.string,pks:prop_types_default.a.arrayOf(prop_types_default.a.string),pksOtherBu:prop_types_default.a.arrayOf(prop_types_default.a.string)})),_marked=(prop_types_default.a.shape({entityModel:prop_types_default.a.string.isRequired,deletable:prop_types_default.a.arrayOf(prop_types_default.a.string).isRequired,notDeletable:prop_types_default.a.arrayOf(prop_types_default.a.string).isRequired,deletableRelated:relatedPropTypes.isRequired,notDeletableRelated:relatedPropTypes.isRequired,unreadableEntities:prop_types_default.a.bool}),regenerator_default.a.mark(sagas_loadDialogInfo)),_marked2=regenerator_default.a.mark(mainSagas),inputSelector=function(state){return state.input};function sagas_loadDialogInfo(){var _ref,selection,entities,body,response,res;return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(inputSelector);case 2:return _ref=_context.sent,selection=_ref.selection,_context.next=6,Object(redux_saga_effects_npm_proxy_esm.b)(src_selection.a.getEntities,selection,rest.a.fetchEntities);case 6:return entities=_context.sent,"client/delete/dialog",body={entityModel:entities.entityName,keys:entities.keys},_context.next=11,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,"client/delete/dialog",{method:"POST",body:body});case 11:return response=_context.sent,res=deleteRequestParser(response.body),_context.next=15,Object(redux_saga_effects_npm_proxy_esm.e)({type:"delete/SET_DELETE_DIALOG_INFO",payload:{dialogInfo:res}});case 15:case"end":return _context.stop()}}),_marked)}function mainSagas(){return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)("root/LOAD_DIALOG_INFO",sagas_loadDialogInfo)]);case 2:case"end":return _context2.stop()}}),_marked2)}var reducers={del:reducer_reducer},sagas=[mainSagas],es=__webpack_require__(39),index_es=__webpack_require__(14),src=__webpack_require__(6),InfoPart=(__webpack_require__(118),__webpack_require__(30),function(_ref){var entityName=_ref.entityName,primary=_ref.primary,related=_ref.related;return react_default.a.createElement(src.C.Span,null," ",react_default.a.createElement(src.C.B,null,entityName," (",primary.length,") "),0<Object.keys(related).length&&" / "+Object.keys(related).map((function(k){return"".concat(related[k].entityName," (").concat([].concat(toConsumableArray_default()(related[k].pks),toConsumableArray_default()(related[k].pksOtherBu)).length,")")})).join(", "),"  ")});InfoPart.displayName="InfoPart";var _ref3=react_default.a.createElement(src.C.P,null,"Wollen Sie wirklich folgende Objekte löschen?"),_ref4=react_default.a.createElement(src.C.P,null,"Diese Objekte können nicht gelöscht werden:"),_ref5=react_default.a.createElement(src.c,{ink:"primary",label:"Abbrechen"}),Dialog=function(_ref2){var dialogInfo=_ref2.dialogInfo;return react_default.a.createElement(react_default.a.Fragment,null,_ref3,react_default.a.createElement(InfoPart,{entityName:dialogInfo.entityName,primary:dialogInfo.deletable,related:dialogInfo.deletableRelated}),0<dialogInfo.notDeletable.length&&react_default.a.createElement(react_default.a.Fragment,null,_ref4,react_default.a.createElement(InfoPart,{entityName:dialogInfo.entityName,primary:dialogInfo.notDeletable,related:dialogInfo.notDeletableRelated})),react_default.a.createElement("div",{style:{paddingTop:"40px"}},react_default.a.createElement(src.c,{disabled:0===dialogInfo.deletable.length,label:"Löschen"}),_ref5))};Dialog.__docgenInfo={description:"",methods:[],displayName:"Dialog",props:{dialogInfo:{type:{name:"custom",raw:"deleteInfoPropTypes.isRequired"},required:!1,description:""}}};var Dialog_Dialog=Dialog;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/delete/src/components/Dialog/Dialog.js"]={name:"Dialog",docgenInfo:Dialog.__docgenInfo,path:"packages/delete/src/components/Dialog/Dialog.js"});var components_Dialog=Dialog_Dialog,Delete=function(_ref){var loadDialogInfo=_ref.loadDialogInfo,dialogInfo=_ref.dialogInfo;return Object(react.useEffect)((function(){loadDialogInfo()}),[]),react_default.a.createElement(src.k,{required:[dialogInfo]},react_default.a.createElement(components_Dialog,{dialogInfo:dialogInfo}))};Delete.displayName="Delete",Delete.__docgenInfo={description:"",methods:[],displayName:"Delete",props:{loadDialogInfo:{type:{name:"func"},required:!0,description:""},dialogInfo:{type:{name:"custom",raw:"deleteInfoPropTypes"},required:!1,description:""}}};var Delete_Delete=Delete;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/delete/src/components/Delete/Delete.js"]={name:"Delete",docgenInfo:Delete.__docgenInfo,path:"packages/delete/src/components/Delete/Delete.js"});var mapActionCreators={loadDialogInfo:function(){return{type:"root/LOAD_DIALOG_INFO"}}},components_Delete=Object(es.connect)((function(state){return{dialogInfo:state.del.dialogInfo}}),mapActionCreators)(Object(index_es.injectIntl)(Delete_Delete)),main_ref=react_default.a.createElement(components_Delete,null),initApp=function(id,input,events,publicPath){var store=appFactory.a.createStore(reducers,sagas,input,"delete");return appFactory.a.createApp("delete",main_ref,store,{input:input,events:events,actions:[],publicPath:publicPath,textResourceModules:["component","common","delete"]})};appFactory.a.registerAppInRegistry("delete",initApp);var DeleteApp=function(props){return initApp(0,props).component};DeleteApp.propTypes={selection:src_selection.a.propType};var main=Object(root.hot)(DeleteApp);__webpack_require__.d(__webpack_exports__,"default",(function(){return main}))},2376:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),reducer=__webpack_require__(28),appFactory=__webpack_require__(72),prop_types=__webpack_require__(10),prop_types_default=__webpack_require__.n(prop_types),root=__webpack_require__(100),setData=function(data){return{type:"qrCode/SET_DATA",payload:{data:data}}},defineProperty=__webpack_require__(4),ACTION_HANDLERS=__webpack_require__.n(defineProperty)()({},"qrCode/SET_DATA",reducer.a.singleTransferReducer("data")),initialState={data:void 0};function reducer_reducer(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,action=1<arguments.length?arguments[1]:void 0,handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state}reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/user-qr-action/src/modules/qrCode/reducer.js"]={name:"reducer",docgenInfo:reducer_reducer.__docgenInfo,path:"packages/user-qr-action/src/modules/qrCode/reducer.js"});__webpack_require__(21),__webpack_require__(162),__webpack_require__(22);var slicedToArray=__webpack_require__(95),slicedToArray_default=__webpack_require__.n(slicedToArray),regenerator=__webpack_require__(2),regenerator_default=__webpack_require__.n(regenerator),redux_saga_effects_npm_proxy_esm=(__webpack_require__(56),__webpack_require__(1)),rest=__webpack_require__(40),consoleLogger=__webpack_require__(87),_marked=regenerator_default.a.mark(sagas),_marked2=regenerator_default.a.mark(sagas_fetchData),inputSelector=function(state){return state.input};function sagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.i)("qrCode/FETCH_DATA",sagas_fetchData)]);case 2:case"end":return _context.stop()}}),_marked)}function sagas_fetchData(){var _ref,selection,userKey,query,entity,data;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(inputSelector);case 2:return _ref=_context2.sent,selection=_ref.selection,userKey=getSingleKey(selection),query={paths:["firstname","lastname","c_address","phone_mobile","phone_company","phone_private","email","email_alternative","birthdate"]},_context2.prev=6,_context2.next=9,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.fetchEntity,"User",userKey,query);case 9:return entity=_context2.sent,data=null,entity&&(data={},Object.entries(entity.paths).forEach((function(_ref2){var _ref3=slicedToArray_default()(_ref2,2),path=_ref3[0],bean=_ref3[1];bean&&bean.value&&(data[path]=bean.value)}))),_context2.next=14,Object(redux_saga_effects_npm_proxy_esm.e)(setData(data));case 14:_context2.next=21;break;case 16:return _context2.prev=16,_context2.t0=_context2.catch(6),consoleLogger.a.logError("Failed to fetch data",_context2.t0),_context2.next=21,Object(redux_saga_effects_npm_proxy_esm.e)(setData(null));case 21:case"end":return _context2.stop()}}),_marked2,null,[[6,16]])}var getSingleKey=function(selection){if("User"!==selection.entityName)throw new Error("Only selection of User supported");if("ID"!==selection.type)throw new Error("Only ID selection type supported");if(!selection.ids||1!==selection.ids.length)throw new Error("Exactly one user must be selected");return selection.ids[0]},reducers={qrCode:reducer_reducer},reducers_sagas=[sagas],es=__webpack_require__(39),taggedTemplateLiteral=__webpack_require__(29),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),src=__webpack_require__(6),styled_components_browser_esm=__webpack_require__(7),index_es=__webpack_require__(14),appendField=(__webpack_require__(24),__webpack_require__(66),__webpack_require__(129),function(data,fieldName,outputPrefix,output){var handler=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(fieldData){return fieldData};return data[fieldName]&&0<data[fieldName].length&&(output+="".concat(outputPrefix,":").concat(handler(data[fieldName]),";")),output});function _templateObject2(){var data=taggedTemplateLiteral_default()(["\n  margin: 0;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]);return _templateObject2=function(){return data},data}function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  width: 148px;\n  height: 148px;\n  position: relative;\n"]);return _templateObject=function(){return data},data}var StyledContainer=styled_components_browser_esm.default.div(_templateObject()),StyledContent=styled_components_browser_esm.default.div(_templateObject2()),UserQrCode_ref2=react_default.a.createElement(src.l,null),UserQrCode_ref3=react_default.a.createElement(src.C.P,null,react_default.a.createElement(index_es.FormattedMessage,{id:"client.user-qr-action.fetchFailed"})),UserQrCode=function(_ref){var content,data=_ref.data,fetchData=_ref.fetchData;if(Object(react.useEffect)((function(){fetchData()}),[]),void 0===data)content=UserQrCode_ref2;else if(null===data)content=UserQrCode_ref3;else{var string=function(data){var string="MECARD:N:".concat(data.lastname,",").concat(data.firstname,";");return string=appendField(data,"c_address","ADR",string,(function(address){return address.replace(/\s*<br\s?\/?>\s*/gi,",")})),string=appendField(data,"phone_mobile","TEL",string),string=appendField(data,"phone_company","TEL",string),string=appendField(data,"phone_private","TEL",string),string=appendField(data,"email","EMAIL",string),string=appendField(data,"email_alternative","EMAIL",string),string=appendField(data,"birthdate","BDAY",string,(function(date){return date.replace(/-/gi,"")}))}(data);content=react_default.a.createElement(src.q,{value:string})}return react_default.a.createElement(StyledContainer,null,react_default.a.createElement(StyledContent,null,content))};UserQrCode.displayName="UserQrCode",UserQrCode.__docgenInfo={description:"",methods:[],displayName:"UserQrCode",props:{data:{type:{name:"shape",value:{firstname:{name:"string",required:!0},lastname:{name:"string",required:!0},c_address:{name:"string",required:!1},phone_mobile:{name:"string",required:!1},phone_company:{name:"string",required:!1},phone_private:{name:"string",required:!1},email:{name:"string",required:!1},email_alternative:{name:"string",required:!1},birthdate:{name:"string",required:!1}}},required:!1,description:""},fetchData:{type:{name:"func"},required:!0,description:""}}};var UserQrCode_UserQrCode=UserQrCode;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/user-qr-action/src/components/UserQrCode/UserQrCode.js"]={name:"UserQrCode",docgenInfo:UserQrCode.__docgenInfo,path:"packages/user-qr-action/src/components/UserQrCode/UserQrCode.js"});var components_UserQrCode=UserQrCode_UserQrCode,mapActionCreators={fetchData:function(){return{type:"qrCode/FETCH_DATA"}}},UserQrCodeContainer=Object(root.hot)(Object(es.connect)((function(state){return{data:state.qrCode.data}}),mapActionCreators)(components_UserQrCode)),initApp=function(id,input,events,publicPath){var content=react_default.a.createElement(UserQrCodeContainer,{selection:input.selection}),store=appFactory.a.createStore(reducers,reducers_sagas,input,"user-qr-action");return appFactory.a.createApp("user-qr-action",content,store,{input:input,events:events,actions:[],publicPath:publicPath,textResourceModules:["component","common","user-qr-action"]})};appFactory.a.registerAppInRegistry("user-qr-action",initApp);var UserQrActionApp=function(props){return initApp(0,props).component};UserQrActionApp.propTypes={selection:prop_types_default.a.object};var main=Object(root.hot)(UserQrActionApp);__webpack_require__.d(__webpack_exports__,"default",(function(){return main}))}}]);
//# sourceMappingURL=actions.d9c6cb2cfb5177d84c34.bundle.js.map