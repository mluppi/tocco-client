(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{3406:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(16),__webpack_require__(27),__webpack_require__(18),__webpack_require__(71),__webpack_require__(28),__webpack_require__(22),__webpack_require__(32),__webpack_require__(33),__webpack_require__(15),__webpack_require__(19);var defineProperty=__webpack_require__(4),defineProperty_default=__webpack_require__.n(defineProperty),react=__webpack_require__(0),react_default=__webpack_require__.n(react),reducer=__webpack_require__(23),appFactory=__webpack_require__(74),prop_types=__webpack_require__(11),prop_types_default=__webpack_require__.n(prop_types),root=__webpack_require__(99),es=__webpack_require__(36),index_es=__webpack_require__(13),taggedTemplateLiteral=__webpack_require__(25),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),styled_components_browser_esm=__webpack_require__(6),src=__webpack_require__(5),helpers_extends=(__webpack_require__(24),__webpack_require__(159),__webpack_require__(48),__webpack_require__(26),__webpack_require__(38),__webpack_require__(602),__webpack_require__(77),__webpack_require__(52),__webpack_require__(41)),extends_default=__webpack_require__.n(helpers_extends),toConsumableArray=__webpack_require__(30),toConsumableArray_default=__webpack_require__.n(toConsumableArray);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var getAllPaths=function(sourceData){return Object.keys(sourceData.entities[0].paths)},getAllRelations=function(sourceData){return toConsumableArray_default()(new Set(sourceData.relations.map((function(r){return r.relationName}))))},getAllPathsAndRelations=function(sourceData){return[].concat(toConsumableArray_default()(getAllPaths(sourceData)),toConsumableArray_default()(getAllRelations(sourceData)))},setSourceData=(prop_types_default.a.shape({entities:prop_types_default.a.arrayOf(prop_types_default.a.shape({key:prop_types_default.a.string.isRequired,model:prop_types_default.a.string.isRequired,paths:prop_types_default.a.objectOf(prop_types_default.a.shape({type:prop_types_default.a.string,writable:prop_types_default.a.bool,value:prop_types_default.a.any}))})).isRequired,relations:prop_types_default.a.arrayOf(prop_types_default.a.shape({entityKey:prop_types_default.a.string.isRequired,relationName:prop_types_default.a.string.isRequired,keys:prop_types_default.a.arrayOf(prop_types_default.a.string).isRequired})).isRequired,displays:prop_types_default.a.arrayOf(prop_types_default.a.shape({model:prop_types_default.a.string.isRequired,values:prop_types_default.a.arrayOf(prop_types_default.a.shape({key:prop_types_default.a.string.isRequired,display:prop_types_default.a.string.isRequired}))})).isRequired,labels:prop_types_default.a.objectOf(prop_types_default.a.string).isRequired,mergeStragegy:prop_types_default.a.shape({display:prop_types_default.a.string})}),function(sourceData){return{type:"merge/SET_SOURCE_DATA",payload:{sourceData:sourceData}}}),actions_setTargetEntity=function(entityKey){return{type:"merge/SET_TARGET_ENTITY",payload:{entityKey:entityKey}}},js=(__webpack_require__(103),__webpack_require__(72),__webpack_require__(111),__webpack_require__(140)),areEqual=function(prevProps,nextProps){return 0===Object.keys(js.a.difference(prevProps,nextProps)).length},CellRender_ref2=react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.allRelations"}),ManyRelationsCheckBox=react_default.a.memo((function(_ref){var entityData=_ref.entityData,entityKey=_ref.entityKey,name=_ref.name,setSelectedMultipleAll=_ref.setSelectedMultipleAll,isSelected=_ref.isSelected;return 0===entityData.value.length?null:react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("input",{type:"checkbox",onChange:function onChange(e){return setSelectedMultipleAll(name,entityKey,e.target.checked)},checked:isSelected}),react_default.a.createElement(src.K.Span,null,CellRender_ref2," (",entityData.value.length,")"))}),areEqual),RelationsCheckBoxes=react_default.a.memo((function(_ref3){var entityData=_ref3.entityData,entityKey=_ref3.entityKey,name=_ref3.name,setSelectedMultiple=_ref3.setSelectedMultiple,selectedMultiple=_ref3.selectedMultiple;return entityData.value.map((function(relationEntity){var isSelected=void 0!==selectedMultiple[name]&&void 0!==selectedMultiple[name][relationEntity.key]&&selectedMultiple[name][relationEntity.key]===entityKey;return react_default.a.createElement("div",{key:"relation-checkbox-".concat(relationEntity.key)},react_default.a.createElement("input",{type:"checkbox",onChange:function onChange(e){return setSelectedMultiple(name,entityKey,relationEntity.key,e.target.checked)},checked:isSelected}),react_default.a.createElement(src.i,{type:"single-select",value:relationEntity}))}))}),areEqual),FormattedValueRadio=react_default.a.memo((function(_ref4){var entityData=_ref4.entityData,entityKey=_ref4.entityKey,name=_ref4.name,setSelectedSingle=_ref4.setSelectedSingle,isSelected=_ref4.isSelected,type=entityData.type,mappedType={entity:"single-select"}[type]||type;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("input",{type:"radio",name:name,onChange:function onChange(){return setSelectedSingle(name,entityKey)},checked:isSelected}),react_default.a.createElement(src.i,{type:mappedType,value:entityData.value}))}),areEqual),CellRender_CellRenderer=function(_ref5){var rowData=_ref5.rowData,column=_ref5.column,setSelectedSingle=_ref5.setSelectedSingle,selectedSingle=_ref5.selectedSingle,setSelectedMultiple=_ref5.setSelectedMultiple,selectedMultiple=_ref5.selectedMultiple,setSelectedMultipleAll=_ref5.setSelectedMultipleAll,selectedMultipleAll=_ref5.selectedMultipleAll,entityKey=column.entityKey,entityData=rowData[entityKey],type=entityData.type,name=rowData.__key;return"relations"===type?react_default.a.createElement(ManyRelationsCheckBox,{entityData:entityData,entityKey:entityKey,name:name,setSelectedMultipleAll:setSelectedMultipleAll,isSelected:void 0!==selectedMultipleAll[name]&&selectedMultipleAll[name].includes(entityKey)}):"entity-list"===type?react_default.a.createElement(RelationsCheckBoxes,{entityData:entityData,entityKey:entityKey,name:name,setSelectedMultiple:setSelectedMultiple,selectedMultiple:selectedMultiple}):react_default.a.createElement(FormattedValueRadio,{entityData:entityData,entityKey:entityKey,name:name,setSelectedSingle:setSelectedSingle,isSelected:selectedSingle[name]===entityKey})};CellRender_CellRenderer.displayName="CellRenderer";var mapActionCreatorsCell={setSelectedSingle:function(name,entityKey){return{type:"merge/SET_SELECTED_SINGLE",payload:{name:name,entityKey:entityKey}}},setSelectedMultiple:function(name,entityKey,relatedEntityKey,isSelected){return{type:"merge/SET_SELECTED_MULTIPLE",payload:{name:name,entityKey:entityKey,relatedEntityKey:relatedEntityKey,isSelected:isSelected}}},setSelectedMultipleAll:function(name,entityKey,isSelected){return{type:"merge/SET_SELECTED_MULTIPLE_ALL",payload:{name:name,entityKey:entityKey,isSelected:isSelected}}}},CellRendererContainer=Object(es.connect)((function(state){return{selectedSingle:state.merge.selected.single,selectedMultiple:state.merge.selected.multiple,selectedMultipleAll:state.merge.selected.multipleAll}}),mapActionCreatorsCell)(Object(index_es.injectIntl)(CellRender_CellRenderer));CellRender_CellRenderer.__docgenInfo={description:"",methods:[],displayName:"CellRenderer",props:{rowData:{type:{name:"objectOf",value:{name:"union",value:[{name:"shape",value:{value:{name:"any",required:!1},type:{name:"string",required:!1}}},{name:"string"}]}},required:!1,description:""},column:{type:{name:"shape",value:{entityKey:{name:"string",required:!0}}},required:!1,description:""},setSelectedSingle:{type:{name:"func"},required:!0,description:""},selectedSingle:{type:{name:"objectOf",value:{name:"string"}},required:!1,description:""},setSelectedMultiple:{type:{name:"func"},required:!0,description:""},selectedMultiple:{type:{name:"objectOf",value:{name:"objectOf",value:{name:"string"}}},required:!1,description:""},setSelectedMultipleAll:{type:{name:"func"},required:!0,description:""},selectedMultipleAll:{type:{name:"objectOf",value:{name:"arrayOf",value:{name:"string"}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/components/MergeTable/CellRender.js"]={name:"CellRenderer",docgenInfo:CellRender_CellRenderer.__docgenInfo,path:"packages/merge/src/components/MergeTable/CellRender.js"});var MergeTable_LabelCellRenderer=function(_ref){var rowIdx=_ref.rowIdx,sourceData=_ref.sourceData,columnName=_ref.allPaths[rowIdx];return react_default.a.createElement(src.K.B,null,sourceData.labels[columnName])};MergeTable_LabelCellRenderer.displayName="LabelCellRenderer";var mapActionCreatorsColumn={setTargetEntity:actions_setTargetEntity},ColumnHeaderRendererContainer=Object(es.connect)((function(state){return{targetEntity:state.merge.selected.targetEntity}}),mapActionCreatorsColumn)(Object(index_es.injectIntl)((function(_ref2){var label=_ref2.label,entityKey=_ref2.entityKey,setTargetEntity=_ref2.setTargetEntity,targetEntity=_ref2.targetEntity;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("input",{type:"radio",name:"column",onChange:function onChange(){return setTargetEntity(entityKey)},checked:targetEntity===entityKey})," ",label)}))),MergeTable_ref4=react_default.a.createElement(index_es.FormattedMessage,{id:"client.merge.saveButton"}),MergeTable=function(_ref3){var sourceData=_ref3.sourceData,executeMerge=_ref3.executeMerge,data=Object(react.useMemo)((function(){return sourceData?function(sourceData){var pathRows=getAllPaths(sourceData).map((function(path){return sourceData.entities.reduce((function(acc,e){var value=e.paths[path];if(value&&value.value){if("entity"===value.type){var display=sourceData.displays.find((function(d){return d.model===value.value.model})).values.find((function(v){return v.key===value.value.key})).display;value.value.display=display}"entity-list"===value.type&&(value.value=value.value.map((function(f){var display=sourceData.displays.find((function(d){return d.model===f.model})).values.find((function(v){return v.key===f.key})).display;return f.display=display,f})))}return _objectSpread({},acc,defineProperty_default()({},e.key,value))}),{__key:path})})),relationRows=getAllRelations(sourceData).map((function(relation){return sourceData.relations.filter((function(r){return r.relationName===relation})).reduce((function(acc,val){return _objectSpread({},acc,defineProperty_default()({},val.entityKey,{type:"relations",value:val.keys}))}),{__key:relation})}));return[].concat(toConsumableArray_default()(pathRows),toConsumableArray_default()(relationRows))}(sourceData):[]}),[sourceData]),columns=Object(react.useMemo)((function(){return sourceData?function(sourceData,ColumnHeaderRenderer,PathCellRenderer,LabelCellRenderer){var pathColumns=sourceData.entities.map((function(entity){return{id:entity.key,entityKey:entity.key,resizable:!0,sorting:{sortable:!1},CellRenderer:PathCellRenderer,HeaderRenderer:function HeaderRenderer(props){return react_default.a.createElement(ColumnHeaderRenderer,extends_default()({},props,{entityKey:entity.key,label:sourceData.displays.find((function(d){return d.model===entity.model})).values.find((function(v){return v.key===entity.key})).display}))}}}));return[{id:"column-label",label:"",resizable:!0,sorting:{sortable:!1},CellRenderer:function CellRenderer(props){return react_default.a.createElement(LabelCellRenderer,extends_default()({},props,{sourceData:sourceData,allPaths:getAllPathsAndRelations(sourceData)}))}}].concat(toConsumableArray_default()(pathColumns))}(sourceData,ColumnHeaderRendererContainer,CellRendererContainer,MergeTable_LabelCellRenderer):[]}),[sourceData]);return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(src.d,{onClick:executeMerge,look:"raised",ink:"primary"},MergeTable_ref4),react_default.a.createElement(src.J,{columns:columns,data:data,selectionStyle:"none",dataLoadingInProgress:null===sourceData,onColumnPositionChange:function onColumnPositionChange(){}}))};MergeTable.__docgenInfo={description:"",methods:[],displayName:"MergeTable",props:{sourceData:{type:{name:"custom",raw:"sourceDataPropType"},required:!1,description:""},executeMerge:{type:{name:"func"},required:!0,description:""}}};var MergeTable_MergeTable=MergeTable;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/components/MergeTable/MergeTable.js"]={name:"MergeTable",docgenInfo:MergeTable.__docgenInfo,path:"packages/merge/src/components/MergeTable/MergeTable.js"});var mapActionCreators={executeMerge:function(){return{type:"merge/EXECUTE_MERGE"}}},components_MergeTable=Object(es.connect)((function(state){return{sourceData:state.merge.sourceData}}),mapActionCreators)(Object(index_es.injectIntl)(MergeTable_MergeTable));function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  margin: 5px;\n  height: 100%;\n  overflow: hidden;\n"]);return _templateObject=function(){return data},data}var StyledMerge=styled_components_browser_esm.default.div(_templateObject()),Merge_ref2=react_default.a.createElement("div",null,"Merge Response"),Merge_ref3=react_default.a.createElement(components_MergeTable,null),Merge=function(_ref){var initialize=_ref.initialize,mergeResponse=_ref.mergeResponse;return Object(react.useEffect)((function(){initialize()})),react_default.a.createElement(StyledMerge,null,mergeResponse?Merge_ref2:Merge_ref3)};Merge.displayName="Merge",Merge.__docgenInfo={description:"",methods:[],displayName:"Merge",props:{initialize:{type:{name:"func"},required:!0,description:""},mergeResponse:{type:{name:"object"},required:!1,description:""}}};var Merge_Merge=Merge;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/components/Merge/Merge.js"]={name:"Merge",docgenInfo:Merge.__docgenInfo,path:"packages/merge/src/components/Merge/Merge.js"});var MergeContainer_mapActionCreators={initialize:function(){return{type:"merge/INITIALIZE"}}},components_Merge=Object(es.connect)((function(state){return{mergeResponse:state.merge.mergeResponse}}),MergeContainer_mapActionCreators)(Object(index_es.injectIntl)(Merge_Merge)),regenerator=__webpack_require__(2),regenerator_default=__webpack_require__.n(regenerator),redux_saga_effects_npm_proxy_esm=(__webpack_require__(40),__webpack_require__(1)),slicedToArray=(__webpack_require__(154),__webpack_require__(58)),slicedToArray_default=__webpack_require__.n(slicedToArray),rest=__webpack_require__(31),_marked=regenerator_default.a.mark(mainSagas),_marked2=regenerator_default.a.mark(sagas_initialize),_marked3=regenerator_default.a.mark(loadSourceData),_marked4=regenerator_default.a.mark(sagas_executeMerge),mergeSelector=function(state){return state.merge};function mainSagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.j)("merge/INITIALIZE",sagas_initialize),Object(redux_saga_effects_npm_proxy_esm.j)("merge/EXECUTE_MERGE",sagas_executeMerge)]);case 2:case"end":return _context.stop()}}),_marked)}function sagas_initialize(){var _ref,selection;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(mergeSelector);case 2:return _ref=_context2.sent,selection=_ref.selection,_context2.next=6,Object(redux_saga_effects_npm_proxy_esm.b)(loadSourceData,selection);case 6:case"end":return _context2.stop()}}),_marked2)}function loadSourceData(selection){var options,response,sourceData;return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return"nice2/rest/merge/sourceData",options={method:"POST",body:{selection:selection}},_context3.next=4,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,"nice2/rest/merge/sourceData",options);case 4:return response=_context3.sent,sourceData=response.body,_context3.next=8,Object(redux_saga_effects_npm_proxy_esm.e)(setSourceData(sourceData));case 8:return _context3.next=10,Object(redux_saga_effects_npm_proxy_esm.e)(actions_setTargetEntity(sourceData.entities[0].key));case 10:case"end":return _context3.stop()}}),_marked3)}function sagas_executeMerge(){var _ref2,selection,selected,sourceData,paths,_loop,_i,_Object$entries,_loop2,_i2,_Object$entries2,mergeRelations,options,response;return regenerator_default.a.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,Object(redux_saga_effects_npm_proxy_esm.f)(mergeSelector);case 2:for(_ref2=_context4.sent,selection=_ref2.selection,selected=_ref2.selected,sourceData=_ref2.sourceData,paths={},_loop=function(){var _Object$entries$_i=slicedToArray_default()(_Object$entries[_i],2),name=_Object$entries$_i[0],entityKey=_Object$entries$_i[1],path=sourceData.entities.find((function(e){return e.key===entityKey})).paths[name];"entity"===path.type?paths[name]={key:path.value.key}:paths[name]=path.value},_i=0,_Object$entries=Object.entries(selected.single);_i<_Object$entries.length;_i++)_loop();for(_loop2=function(){var _Object$entries2$_i=slicedToArray_default()(_Object$entries2[_i2],2),name=_Object$entries2$_i[0],obj=_Object$entries2$_i[1];paths[name]=[],Object.keys(obj).forEach((function(value){return paths[name].push({key:value})}))},_i2=0,_Object$entries2=Object.entries(selected.multiple);_i2<_Object$entries2.length;_i2++)_loop2();return mergeRelations=[],sourceData.relations.forEach((function(relation){var isSelected=selected.multipleAll[relation.relationName].includes(relation.entityKey);(isSelected||relation.entityKey===selected.targetEntity)&&mergeRelations.push({relationName:relation.relationName,sourceKey:relation.entityKey,selected:isSelected})})),"nice2/rest/merge/merge",options={method:"POST",body:{selection:selection,targetEntity:{key:selected.targetEntity,paths:paths},mergeRelations:mergeRelations}},_context4.next=17,Object(redux_saga_effects_npm_proxy_esm.b)(rest.a.requestSaga,"nice2/rest/merge/merge",options);case 17:return response=_context4.sent,_context4.next=20,Object(redux_saga_effects_npm_proxy_esm.e)({type:"merge/SET_MERGE_RESPONSE",payload:{mergeResponse:response}});case 20:case"end":return _context4.stop()}}),_marked4)}var _ACTION_HANDLERS,omit=__webpack_require__(190),omit_default=__webpack_require__.n(omit);function reducer_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function reducer_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?reducer_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):reducer_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var ACTION_HANDLERS=(_ACTION_HANDLERS={},defineProperty_default()(_ACTION_HANDLERS,"merge/SET_SELECTION",reducer.a.singleTransferReducer("selection")),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_SOURCE_DATA",reducer.a.singleTransferReducer("sourceData")),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_MERGE_RESPONSE",reducer.a.singleTransferReducer("mergeResponse")),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_SELECTED_SINGLE",(function(state,_ref){var _ref$payload=_ref.payload,name=_ref$payload.name,entityKey=_ref$payload.entityKey;return reducer_objectSpread({},state,{selected:reducer_objectSpread({},state.selected,{single:reducer_objectSpread({},state.selected.single,defineProperty_default()({},name,entityKey))})})})),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_SELECTED_MULTIPLE",(function(state,_ref2){var multiple,_ref2$payload=_ref2.payload,name=_ref2$payload.name,entityKey=_ref2$payload.entityKey,relatedEntityKey=_ref2$payload.relatedEntityKey;return _ref2$payload.isSelected?multiple=reducer_objectSpread({},state.selected.multiple,defineProperty_default()({},name,reducer_objectSpread({},state.selected.multiple[name],defineProperty_default()({},relatedEntityKey,entityKey)))):(multiple=reducer_objectSpread({},state.selected.multiple))[name]=omit_default()(multiple[name],[relatedEntityKey]),reducer_objectSpread({},state,{selected:reducer_objectSpread({},state.selected,{multiple:multiple})})})),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_SELECTED_MULTIPLE_ALL",(function(state,_ref3){var array,_ref3$payload=_ref3.payload,name=_ref3$payload.name,entityKey=_ref3$payload.entityKey;return array=_ref3$payload.isSelected?[].concat(toConsumableArray_default()(state.selected.multipleAll[name]||[]),[entityKey]):state.selected.multipleAll[name].filter((function(key){return key!==entityKey})),reducer_objectSpread({},state,{selected:reducer_objectSpread({},state.selected,{multipleAll:reducer_objectSpread({},state.selected.multipleAll,defineProperty_default()({},name,array))})})})),defineProperty_default()(_ACTION_HANDLERS,"merge/SET_TARGET_ENTITY",(function(state,_ref4){for(var entityKey=_ref4.payload.entityKey,single={},multiple={},multipleAll={},_loop=function(){var _Object$entries$_i=slicedToArray_default()(_Object$entries[_i],2),key=_Object$entries$_i[0],obj=_Object$entries$_i[1];"entity-list"===obj.type?(multiple[key]={},obj.value.map((function(e){return e.key})).forEach((function(relatedEntityKey){multiple[key][relatedEntityKey]=entityKey}))):single[key]=entityKey},_i=0,_Object$entries=Object.entries(state.sourceData.entities.find((function(e){return e.key===entityKey})).paths);_i<_Object$entries.length;_i++)_loop();return state.sourceData.relations.filter((function(e){return e.entityKey===entityKey&&0<e.keys.length})).map((function(e){return e.relationName})).forEach((function(relationName){multipleAll[relationName]=[entityKey]})),reducer_objectSpread({},state,{selected:reducer_objectSpread({},state.selected,{targetEntity:entityKey,single:single,multiple:multiple,multipleAll:multipleAll})})})),_ACTION_HANDLERS),initialState={selection:null,sourceData:null,mergeResponse:null,selected:{targetEntity:null,single:{},multiple:{},multipleAll:{}}};function reducer_reducer(){var state=0<arguments.length&&void 0!==arguments[0]?arguments[0]:initialState,action=1<arguments.length?arguments[1]:void 0,handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state}reducer_reducer.__docgenInfo={description:"",methods:[],displayName:"reducer"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/merge/src/modules/merge/reducer.js"]={name:"reducer",docgenInfo:reducer_reducer.__docgenInfo,path:"packages/merge/src/modules/merge/reducer.js"});var merge_marked=regenerator_default.a.mark(sagas);function sagas(){return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(redux_saga_effects_npm_proxy_esm.a)([Object(redux_saga_effects_npm_proxy_esm.d)(mainSagas)]);case 2:case"end":return _context.stop()}}),merge_marked)}var reducers={merge:reducer_reducer},reducers_sagas=[sagas];function main_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var EXTERNAL_EVENTS=["emitAction"],main_ref=react_default.a.createElement(components_Merge,null),initApp=function(id,input,events,publicPath){var selection,store=appFactory.a.createStore(reducers,reducers_sagas,input,"merge");return appFactory.a.createApp("merge",main_ref,store,{input:input,events:events,actions:[(selection=input.selection,{type:"merge/SET_SELECTION",payload:{selection:selection}})],publicPath:publicPath,textResourceModules:["component","common","merge"]})};appFactory.a.registerAppInRegistry("merge",initApp);var MergeApp=function(props){var events=EXTERNAL_EVENTS.reduce((function(events,event){return props[event]&&(events[event]=props[event]),events}),{});return initApp(0,props,events).component};MergeApp.propTypes=function main_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?main_ownKeys(source,!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):main_ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({selection:prop_types_default.a.object},EXTERNAL_EVENTS.reduce((function(propTypes,event){return propTypes[event]=prop_types_default.a.func,propTypes}),{}));__webpack_exports__.default=Object(root.hot)(MergeApp)}}]);
//# sourceMappingURL=16.6f38f915da66c17702f1.bundle.js.map