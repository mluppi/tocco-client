(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{2798:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _reducer2=_interopRequireDefault(__webpack_require__(556)),_EntityDetailContainer2=_interopRequireDefault(__webpack_require__(2872)),_sagas2=_interopRequireDefault(__webpack_require__(2909)),_modules2=_interopRequireDefault(__webpack_require__(2914));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={container:_EntityDetailContainer2.default,reducers:{detail:_modules2.default,form:_reducer2.default},sagas:[_sagas2.default]}},2808:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SET_FORM_DEFINITION=exports.SET_FORM_DEFINITION="entityDetail/SET_FORM_DEFINITION",LOAD_DETAIL_VIEW=exports.LOAD_DETAIL_VIEW="entityDetail/LOAD_DETAIL_VIEW",SET_ENTITY=exports.SET_ENTITY="entityDetail/SET_ENTITY",SUBMIT_FORM=exports.SUBMIT_FORM="entityDetail/SUBMIT_FORM",SET_LAST_SAVE=exports.SET_LAST_SAVE="entityDetail/SET_LAST_SAVE",SET_ENTITY_MODEL=exports.SET_ENTITY_MODEL="entityDetail/SET_ENTITY_MODEL",UNLOAD_DETAIL_VIEW=exports.UNLOAD_DETAIL_VIEW="entityDetail/UNLOAD_DETAIL_VIEW",FIRE_TOUCHED=exports.FIRE_TOUCHED="entityDetail/FIRE_TOUCHED",SET_TOUCHED=exports.SET_TOUCHED="entityDetail/SET_TOUCHED",SET_ENTITY_NAME=exports.SET_ENTITY_NAME="entityDetail/SET_ENTITY_NAME",SET_ENTITY_ID=exports.SET_ENTITY_ID="entityDetail/SET_ENTITY_ID",SET_MODE=exports.SET_MODE="entityDetail/SET_MODE",SET_FORM_NAME=exports.SET_FORM_NAME="entityDetail/SET_FORM_NAME",SET_SHOW_SUB_GRIDS_CREATE_BUTTON=exports.SET_SHOW_SUB_GRIDS_CREATE_BUTTON="entityDetail/SET_SHOW_SUB_GRIDS_CREATE_BUTTON",UPLOAD_DOCUMENT=exports.UPLOAD_DOCUMENT="entityDetail/UPLOAD_DOCUMENT",SET_APP_ID=exports.SET_APP_ID="entityDetail/SET_APP_ID";exports.setFormDefinition=function(formDefinition){return{type:SET_FORM_DEFINITION,payload:{formDefinition:formDefinition}}},exports.loadDetailView=function(modelPaths,entityId){return{type:LOAD_DETAIL_VIEW,payload:{modelPaths:modelPaths,entityId:entityId}}},exports.setEntity=function(entity){return{type:SET_ENTITY,payload:{entity:entity}}},exports.submitForm=function(){return{type:SUBMIT_FORM}},exports.setLastSave=function(){var lastSave=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return{type:SET_LAST_SAVE,payload:{lastSave:lastSave}}},exports.setEntityModel=function(entityModel){return{type:SET_ENTITY_MODEL,payload:{entityModel:entityModel}}},exports.unloadDetailView=function(){return{type:UNLOAD_DETAIL_VIEW}},exports.fireTouched=function(touched){return{type:FIRE_TOUCHED,payload:{touched:touched}}},exports.setTouched=function(touched){return{type:SET_TOUCHED,payload:{touched:touched}}},exports.setEntityName=function(entityName){return{type:SET_ENTITY_NAME,payload:{entityName:entityName}}},exports.setEntityId=function(entityId){return{type:SET_ENTITY_ID,payload:{entityId:entityId}}},exports.setMode=function(mode){return{type:SET_MODE,payload:{mode:mode}}},exports.setFormName=function(formName){return{type:SET_FORM_NAME,payload:{formName:formName}}},exports.setShowSubGridsCreateButton=function(showSubGridCreateButton){return{type:SET_SHOW_SUB_GRIDS_CREATE_BUTTON,payload:{showSubGridCreateButton:showSubGridCreateButton}}},exports.uploadDocument=function(file,field){return{type:UPLOAD_DOCUMENT,payload:{file:file,field:field}}},exports.setAppId=function(appId){return{type:SET_APP_ID,payload:{appId:appId}}}},2811:function(module,exports,__webpack_require__){module.exports=__webpack_require__(2877)()},2815:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var obj,_Router=__webpack_require__(368),_Router2=(obj=_Router)&&obj.__esModule?obj:{default:obj};exports.default=_Router2.default},2816:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={CREATE:"create",UPDATE:"update"}},2817:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SET_FORM_TOUCHED=exports.SET_FORM_TOUCHED="detailView/SET_FORM_TOUCHED",LOAD_DETAIL_PARAMS=exports.LOAD_DETAIL_PARAMS="root/LOAD_DETAIL_PARAMS",SET_DETAIL_PARAMS=exports.SET_DETAIL_PARAMS="root/SET_DETAIL_PARAMS",CLEAR_DETAIL_PARAMS=exports.CLEAR_DETAIL_PARAMS="root/CLEAR_DETAIL_PARAMS";exports.setFormTouched=function(formTouched){return{type:SET_FORM_TOUCHED,payload:{formTouched:formTouched}}},exports.loadDetailParams=function(url){return{type:LOAD_DETAIL_PARAMS,payload:{url:url}}},exports.setDetailParams=function(detailParams){return{type:SET_DETAIL_PARAMS,payload:{detailParams:detailParams}}},exports.clearDetailParams=function(){return{type:CLEAR_DETAIL_PARAMS}}},2830:function(module,exports,__webpack_require__){"use strict";var warning=function(){};module.exports=warning},2831:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react2=_interopRequireDefault(__webpack_require__(0)),_propTypes2=_interopRequireDefault(__webpack_require__(2811)),_invariant2=_interopRequireDefault(__webpack_require__(2880)),_history=__webpack_require__(365);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var isModifiedEvent=function(event){return!!(event.metaKey||event.altKey||event.ctrlKey||event.shiftKey)},Link=function(_React$Component){function Link(){var _temp,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Link);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,_React$Component.call.apply(_React$Component,[this].concat(args))),_this.handleClick=function(event){if(_this.props.onClick&&_this.props.onClick(event),!event.defaultPrevented&&0===event.button&&!_this.props.target&&!isModifiedEvent(event)){event.preventDefault();var history=_this.context.router.history,_this$props=_this.props,replace=_this$props.replace,to=_this$props.to;replace?history.replace(to):history.push(to)}},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Link,_React$Component),Link.prototype.render=function(){var _props=this.props,to=(_props.replace,_props.to),innerRef=_props.innerRef,props=function(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}(_props,["replace","to","innerRef"]);(0,_invariant2.default)(this.context.router,"You should not use <Link> outside a <Router>"),(0,_invariant2.default)(void 0!==to,'You must specify the "to" property');var history=this.context.router.history,location="string"==typeof to?(0,_history.createLocation)(to,null,null,history.location):to,href=history.createHref(location);return _react2.default.createElement("a",_extends({},props,{onClick:this.handleClick,href:href,ref:innerRef}))},Link}(_react2.default.Component);Link.propTypes={onClick:_propTypes2.default.func,target:_propTypes2.default.string,replace:_propTypes2.default.bool,to:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.object]).isRequired,innerRef:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.func])},Link.defaultProps={replace:!1},Link.contextTypes={router:_propTypes2.default.shape({history:_propTypes2.default.shape({push:_propTypes2.default.func.isRequired,replace:_propTypes2.default.func.isRequired,createHref:_propTypes2.default.func.isRequired}).isRequired}).isRequired},exports.default=Link},2832:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var obj,_Route=__webpack_require__(559),_Route2=(obj=_Route)&&obj.__esModule?obj:{default:obj};exports.default=_Route2.default},2833:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asyncValidate=exports.submitValidate=exports.asyncValidateTypes=exports.AsyncValidationException=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_SubmissionError2=_interopRequireDefault(__webpack_require__(371)),_form2=_interopRequireDefault(__webpack_require__(87)),_rest2=_interopRequireDefault(__webpack_require__(47)),_get3=_interopRequireDefault(__webpack_require__(119)),_modes2=_interopRequireDefault(__webpack_require__(2816));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){return function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}("next")})}}var asyncValidators=_form2.default.validators.asyncValidators,AsyncValidationException=exports.AsyncValidationException=function AsyncValidationException(errors){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AsyncValidationException),this.name="AsyncValidationException",this.errors=errors};AsyncValidationException.prototype=Object.create(Error.prototype);var _ref,_ref2,hasError=function(errors){return errors&&Object.keys(errors).length>0},asyncValidateTypes=exports.asyncValidateTypes=(_ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(values,entityModel){var errors,key,value,type,typeValidator,fieldModel,validationError,error;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:errors={},_context.t0=regeneratorRuntime.keys(values);case 2:if((_context.t1=_context.t0()).done){_context.next=16;break}if(key=_context.t1.value,!(value=values[key])){_context.next=14;break}if(type=(0,_get3.default)(entityModel,key+".type"),!(typeValidator=asyncValidators[type])){_context.next=14;break}return fieldModel=entityModel[key],_context.next=12,typeValidator(value,fieldModel);case 12:(validationError=_context.sent)&&(error=_form2.default.formErrorsUtil.addErrors(errors,key,validationError),errors=_extends({},errors,error));case 14:_context.next=2;break;case 16:return _context.abrupt("return",errors);case 17:case"end":return _context.stop()}},_callee,void 0)})),function(_x,_x2){return _ref.apply(this,arguments)}),validateRequest=function(values,initialValues,entityName,entityId,entityModel,mode){var dirtyFields=_form2.default.getDirtyFields(initialValues,values),entity=_form2.default.formValuesToEntity(values,dirtyFields,entityName,entityId,entityModel),options={queryParams:{_validate:!0},method:mode===_modes2.default.CREATE?"POST":"PATCH",body:entity};return _rest2.default.simpleRequest("entities/"+entity.model+(entity.key?"/"+entity.key:""),options).then(function(resp){return resp.body}).then(function(body){return body.valid?{}:_form2.default.validationErrorToFormError(entity,body.errors)})};exports.submitValidate=function(values,initialValues,entityName,entityId,entityModel,mode){return validateRequest(values,initialValues,entityName,entityId,entityModel,mode).then(function(errors){if(hasError(errors))throw new _SubmissionError2.default(errors)})},exports.asyncValidate=(_ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(values,initialValues,entityName,entityId,entityModel,mode){var typeValidationErrors,validateRequestErrors;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,asyncValidateTypes(values,entityModel);case 2:if(typeValidationErrors=_context2.sent,!hasError(typeValidationErrors)){_context2.next=5;break}throw new AsyncValidationException(typeValidationErrors);case 5:return _context2.next=7,validateRequest(values,initialValues,entityName,entityId,entityModel,mode);case 7:if(validateRequestErrors=_context2.sent,!hasError(validateRequestErrors)){_context2.next=10;break}throw new AsyncValidationException(validateRequestErrors);case 10:case"end":return _context2.stop()}},_callee2,void 0)})),function(_x3,_x4,_x5,_x6,_x7,_x8){return _ref2.apply(this,arguments)})},2834:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _react2=_interopRequireDefault(__webpack_require__(0)),_SubGridContainer2=_interopRequireDefault(__webpack_require__(2901));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(type){return function(formField,modelField,key){return _react2.default.createElement(_SubGridContainer2.default,{key:key,gridName:formField.id,relationName:formField.id,modelField:modelField,showSearchForm:formField.showSearchForm,limit:formField.limit||void 0})}}},2835:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var getFormInitialValues=function(_ref){var getIn=_ref.getIn;return function(form,getFormState){return function(state){var nonNullGetFormState=getFormState||function(state){return getIn(state,"form")};return getIn(nonNullGetFormState(state),form+".initial")}}},plain=__webpack_require__(21);__webpack_exports__.default=getFormInitialValues(plain.a)},2872:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _reactRedux=__webpack_require__(26),_reactIntl=__webpack_require__(9),_actionEmitter2=_interopRequireDefault(__webpack_require__(130)),_EntityDetail2=_interopRequireDefault(__webpack_require__(2873)),_actions=__webpack_require__(2817);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapActionCreators={loadDetailParams:_actions.loadDetailParams,clearDetailParams:_actions.clearDetailParams,setFormTouched:_actions.setFormTouched,dispatchEmittedAction:_actionEmitter2.default.dispatchEmittedAction};exports.default=(0,_reactRedux.connect)(function(state,props){return{appId:state.entityBrowser.appId,detailParams:state.detail.detailParams,formTouched:state.detail.formTouched,showSubGridsCreateButton:state.input.showCreateButton}},mapActionCreators)((0,_reactIntl.injectIntl)(_EntityDetail2.default))},2873:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_EntityDetail=__webpack_require__(2874),_EntityDetail2=(obj=_EntityDetail)&&obj.__esModule?obj:{default:obj};exports.default=_EntityDetail2.default},2874:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactRouterDom=__webpack_require__(2875),_reactIntl=__webpack_require__(9),_toccoUi=__webpack_require__(20),_main2=_interopRequireDefault(__webpack_require__(2890));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var EntityDetail=function(_React$Component){function EntityDetail(){var _ref,_temp,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EntityDetail);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=EntityDetail.__proto__||Object.getPrototypeOf(EntityDetail)).call.apply(_ref,[this].concat(args))),_this.handleSubGridRowClick=function(_ref2){var id=_ref2.id,relationName=(_ref2.gridName,_ref2.relationName);_this.props.router.history.push(_this.props.router.match.url+"/"+relationName+"/"+id)},_this.handleSubGridNavigateToCreate=function(_ref3){_ref3.gridName;var relationName=_ref3.relationName;_this.props.router.history.push(_this.props.router.match.url+"/"+relationName+"/")},_this.handleEntityCreated=function(_ref4){var id=_ref4.id;_this.props.setFormTouched(!1);var url=_this.props.router.match.url;url="/"!==url.substr(-1)?url+="/":url,_this.props.router.history.push(""+url+id)},_this.handleTouchedChange=function(_ref5){var touched=_ref5.touched;_this.props.setFormTouched(touched)},_this.handleGoBack=function(){_this.props.router.history.push(_this.props.detailParams.parentUrl)},_this.getApp=function(_ref6){var entityName=_ref6.entityName,entityId=_ref6.entityId,formName=_ref6.formName,mode=_ref6.mode;return _react2.default.createElement(_main2.default,{id:_this.props.appId+"_detail_"+formName+"_"+entityId,entityName:entityName,entityId:entityId,formName:formName,mode:mode,onSubGridRowClick:_this.handleSubGridRowClick,onSubGridNavigateToCreate:_this.handleSubGridNavigateToCreate,onEntityCreated:_this.handleEntityCreated,onTouchedChange:_this.handleTouchedChange,emitAction:function(action){_this.props.dispatchEmittedAction(action)},showSubGridsCreateButton:_this.props.showSubGridsCreateButton,theme:{}})},_this.msg=function(id){return _this.props.intl.formatMessage({id:id})},_this.render=function(){return _react2.default.createElement("div",null,_react2.default.createElement("div",null,_react2.default.createElement(_reactRouterDom.Prompt,{when:_this.props.formTouched,message:_this.msg("client.entity-browser.detail.confirmTouchedFormLeave")}),_this.props.detailParams&&_react2.default.createElement("div",null,_this.props.detailParams.showBackButton&&_react2.default.createElement("div",{style:{marginBottom:".5em"}},_react2.default.createElement(_toccoUi.Button,{icon:"chevron-left",label:_this.msg("client.entity-browser.back"),look:"raised",onClick:_this.handleGoBack})),_this.getApp(_this.props.detailParams))))},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(EntityDetail,_react2.default.Component),_createClass(EntityDetail,[{key:"componentWillMount",value:function(){this.props.loadDetailParams(this.props.router.match.url),this.props.setFormTouched(!1)}},{key:"componentWillUnmount",value:function(){this.props.clearDetailParams()}}]),EntityDetail}();EntityDetail.propTypes={intl:_reactIntl.intlShape.isRequired,dispatchEmittedAction:_propTypes2.default.func.isRequired,loadDetailParams:_propTypes2.default.func.isRequired,clearDetailParams:_propTypes2.default.func.isRequired,setFormTouched:_propTypes2.default.func.isRequired,router:_propTypes2.default.object.isRequired,detailParams:_propTypes2.default.object,formTouched:_propTypes2.default.bool,showSubGridsCreateButton:_propTypes2.default.bool,appId:_propTypes2.default.string},exports.default=EntityDetail,EntityDetail.__docgenInfo={description:"",methods:[{name:"handleSubGridRowClick",docblock:null,modifiers:[],params:[{name:"{id, gridName, relationName}",type:null}],returns:null},{name:"handleSubGridNavigateToCreate",docblock:null,modifiers:[],params:[{name:"{gridName, relationName}",type:null}],returns:null},{name:"handleEntityCreated",docblock:null,modifiers:[],params:[{name:"{id}",type:null}],returns:null},{name:"handleTouchedChange",docblock:null,modifiers:[],params:[{name:"{touched}",type:null}],returns:null},{name:"handleGoBack",docblock:null,modifiers:[],params:[],returns:null},{name:"getApp",docblock:null,modifiers:[],params:[{name:"{entityName, entityId, formName, mode}",type:null}],returns:null},{name:"msg",docblock:null,modifiers:[],params:[{name:"id",type:null}],returns:null},{name:"render",docblock:null,modifiers:[],params:[],returns:null}],displayName:"EntityDetail",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},dispatchEmittedAction:{type:{name:"func"},required:!0,description:""},loadDetailParams:{type:{name:"func"},required:!0,description:""},clearDetailParams:{type:{name:"func"},required:!0,description:""},setFormTouched:{type:{name:"func"},required:!0,description:""},router:{type:{name:"object"},required:!0,description:""},detailParams:{type:{name:"object"},required:!1,description:""},formTouched:{type:{name:"bool"},required:!1,description:""},showSubGridsCreateButton:{type:{name:"bool"},required:!1,description:""},appId:{type:{name:"string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-browser/src/routes/detail/components/EntityDetail/EntityDetail.js"]={name:"EntityDetail",docgenInfo:EntityDetail.__docgenInfo,path:"packages/entity-browser/src/routes/detail/components/EntityDetail/EntityDetail.js"})},2875:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.withRouter=exports.matchPath=exports.generatePath=exports.Switch=exports.StaticRouter=exports.Router=exports.Route=exports.Redirect=exports.Prompt=exports.NavLink=exports.MemoryRouter=exports.Link=exports.HashRouter=exports.BrowserRouter=void 0;var _BrowserRouter3=_interopRequireDefault(__webpack_require__(2876)),_HashRouter3=_interopRequireDefault(__webpack_require__(2879)),_Link3=_interopRequireDefault(__webpack_require__(2831)),_MemoryRouter3=_interopRequireDefault(__webpack_require__(2881)),_NavLink3=_interopRequireDefault(__webpack_require__(2882)),_Prompt3=_interopRequireDefault(__webpack_require__(2883)),_Redirect3=_interopRequireDefault(__webpack_require__(2884)),_Route3=_interopRequireDefault(__webpack_require__(2832)),_Router3=_interopRequireDefault(__webpack_require__(2815)),_StaticRouter3=_interopRequireDefault(__webpack_require__(2885)),_Switch3=_interopRequireDefault(__webpack_require__(2886)),_generatePath3=_interopRequireDefault(__webpack_require__(2887)),_matchPath3=_interopRequireDefault(__webpack_require__(2888)),_withRouter3=_interopRequireDefault(__webpack_require__(2889));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.BrowserRouter=_BrowserRouter3.default,exports.HashRouter=_HashRouter3.default,exports.Link=_Link3.default,exports.MemoryRouter=_MemoryRouter3.default,exports.NavLink=_NavLink3.default,exports.Prompt=_Prompt3.default,exports.Redirect=_Redirect3.default,exports.Route=_Route3.default,exports.Router=_Router3.default,exports.StaticRouter=_StaticRouter3.default,exports.Switch=_Switch3.default,exports.generatePath=_generatePath3.default,exports.matchPath=_matchPath3.default,exports.withRouter=_withRouter3.default},2876:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _warning2=_interopRequireDefault(__webpack_require__(2830)),_react2=_interopRequireDefault(__webpack_require__(0)),_propTypes2=_interopRequireDefault(__webpack_require__(2811)),_history=__webpack_require__(365),_Router2=_interopRequireDefault(__webpack_require__(2815));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var BrowserRouter=function(_React$Component){function BrowserRouter(){var _temp,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BrowserRouter);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,_React$Component.call.apply(_React$Component,[this].concat(args))),_this.history=(0,_history.createBrowserHistory)(_this.props),_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(BrowserRouter,_React$Component),BrowserRouter.prototype.componentWillMount=function(){(0,_warning2.default)(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},BrowserRouter.prototype.render=function(){return _react2.default.createElement(_Router2.default,{history:this.history,children:this.props.children})},BrowserRouter}(_react2.default.Component);BrowserRouter.propTypes={basename:_propTypes2.default.string,forceRefresh:_propTypes2.default.bool,getUserConfirmation:_propTypes2.default.func,keyLength:_propTypes2.default.number,children:_propTypes2.default.node},exports.default=BrowserRouter},2877:function(module,exports,__webpack_require__){"use strict";var emptyFunction=__webpack_require__(105),invariant=__webpack_require__(150),ReactPropTypesSecret=__webpack_require__(2878);module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){secret!==ReactPropTypesSecret&&invariant(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};return ReactPropTypes.checkPropTypes=emptyFunction,ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},2878:function(module,exports,__webpack_require__){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2879:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _warning2=_interopRequireDefault(__webpack_require__(2830)),_react2=_interopRequireDefault(__webpack_require__(0)),_propTypes2=_interopRequireDefault(__webpack_require__(2811)),_history=__webpack_require__(365),_Router2=_interopRequireDefault(__webpack_require__(2815));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var HashRouter=function(_React$Component){function HashRouter(){var _temp,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HashRouter);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,_React$Component.call.apply(_React$Component,[this].concat(args))),_this.history=(0,_history.createHashHistory)(_this.props),_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(HashRouter,_React$Component),HashRouter.prototype.componentWillMount=function(){(0,_warning2.default)(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},HashRouter.prototype.render=function(){return _react2.default.createElement(_Router2.default,{history:this.history,children:this.props.children})},HashRouter}(_react2.default.Component);HashRouter.propTypes={basename:_propTypes2.default.string,getUserConfirmation:_propTypes2.default.func,hashType:_propTypes2.default.oneOf(["hashbang","noslash","slash"]),children:_propTypes2.default.node},exports.default=HashRouter},2880:function(module,exports,__webpack_require__){"use strict";module.exports=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;(error=new Error(format.replace(/%s/g,function(){return args[argIndex++]}))).name="Invariant Violation"}throw error.framesToPop=1,error}}},2881:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var obj,_MemoryRouter=__webpack_require__(1227),_MemoryRouter2=(obj=_MemoryRouter)&&obj.__esModule?obj:{default:obj};exports.default=_MemoryRouter2.default},2882:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_react2=_interopRequireDefault(__webpack_require__(0)),_propTypes2=_interopRequireDefault(__webpack_require__(2811)),_Route2=_interopRequireDefault(__webpack_require__(2832)),_Link2=_interopRequireDefault(__webpack_require__(2831));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NavLink=function(_ref){var to=_ref.to,exact=_ref.exact,strict=_ref.strict,location=_ref.location,activeClassName=_ref.activeClassName,className=_ref.className,activeStyle=_ref.activeStyle,style=_ref.style,getIsActive=_ref.isActive,ariaCurrent=_ref["aria-current"],rest=function(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}(_ref,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),path="object"===(void 0===to?"undefined":_typeof(to))?to.pathname:to,escapedPath=path&&path.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return _react2.default.createElement(_Route2.default,{path:escapedPath,exact:exact,strict:strict,location:location,children:function(_ref2){var location=_ref2.location,match=_ref2.match,isActive=!!(getIsActive?getIsActive(match,location):match);return _react2.default.createElement(_Link2.default,_extends({to:to,className:isActive?[className,activeClassName].filter(function(i){return i}).join(" "):className,style:isActive?_extends({},style,activeStyle):style,"aria-current":isActive&&ariaCurrent||null},rest))}})};NavLink.propTypes={to:_Link2.default.propTypes.to,exact:_propTypes2.default.bool,strict:_propTypes2.default.bool,location:_propTypes2.default.object,activeClassName:_propTypes2.default.string,className:_propTypes2.default.string,activeStyle:_propTypes2.default.object,style:_propTypes2.default.object,isActive:_propTypes2.default.func,"aria-current":_propTypes2.default.oneOf(["page","step","location","date","time","true"])},NavLink.defaultProps={activeClassName:"active","aria-current":"page"},exports.default=NavLink},2883:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var obj,_Prompt=__webpack_require__(1228),_Prompt2=(obj=_Prompt)&&obj.__esModule?obj:{default:obj};exports.default=_Prompt2.default},2884:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var obj,_Redirect=__webpack_require__(1229),_Redirect2=(obj=_Redirect)&&obj.__esModule?obj:{default:obj};exports.default=_Redirect2.default},2885:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var obj,_StaticRouter=__webpack_require__(1230),_StaticRouter2=(obj=_StaticRouter)&&obj.__esModule?obj:{default:obj};exports.default=_StaticRouter2.default},2886:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var obj,_Switch=__webpack_require__(1231),_Switch2=(obj=_Switch)&&obj.__esModule?obj:{default:obj};exports.default=_Switch2.default},2887:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var obj,_generatePath=__webpack_require__(558),_generatePath2=(obj=_generatePath)&&obj.__esModule?obj:{default:obj};exports.default=_generatePath2.default},2888:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var obj,_matchPath=__webpack_require__(369),_matchPath2=(obj=_matchPath)&&obj.__esModule?obj:{default:obj};exports.default=_matchPath2.default},2889:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var obj,_withRouter=__webpack_require__(1232),_withRouter2=(obj=_withRouter)&&obj.__esModule?obj:{default:obj};exports.default=_withRouter2.default},2890:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_appFactory2=(_interopRequireDefault(__webpack_require__(45)),_interopRequireDefault(__webpack_require__(131))),_notifier2=_interopRequireDefault(__webpack_require__(75)),_errorLogging2=_interopRequireDefault(__webpack_require__(118)),_actionEmitter2=_interopRequireDefault(__webpack_require__(130)),_externalEvents2=_interopRequireDefault(__webpack_require__(66)),_actions2=_interopRequireDefault(__webpack_require__(184)),_formData2=_interopRequireDefault(__webpack_require__(270)),_main2=_interopRequireDefault(__webpack_require__(1234)),_main4=_interopRequireDefault(__webpack_require__(1222)),_reducers=__webpack_require__(2891),_reducers2=_interopRequireDefault(_reducers),_DetailViewContainer2=_interopRequireDefault(__webpack_require__(2897)),_input=__webpack_require__(2908);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EXTERNAL_EVENTS=["onSubGridRowClick","onSubGridNavigateToCreate","onEntityCreated","onTouchedChange","emitAction"],initApp=function(id,input){var events=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},publicPath=arguments[3],content=_react2.default.createElement("div",null,_react2.default.createElement(_DetailViewContainer2.default,null)),store=_appFactory2.default.createStore(_reducers2.default,_reducers.sagas,input,"entity-detail");_externalEvents2.default.addToStore(store,events),_actionEmitter2.default.addToStore(store,events.emitAction),_errorLogging2.default.addToStore(store,!1),_notifier2.default.addToStore(store,!1),_actions2.default.addToStore(store,{formApp:_main2.default,listApp:_main4.default}),_formData2.default.addToStore(store,{listApp:_main4.default});var dispatchActions=(0,_input.getDispatchActions)(input);return _appFactory2.default.createApp("entity-detail",content,store,{input:input,events:events,actions:dispatchActions,publicPath:publicPath,textResourceModules:["component","common","entity-list"]})};_appFactory2.default.registerAppInRegistry("entity-detail",initApp);var EntityDetailApp=function(_React$Component){function EntityDetailApp(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EntityDetailApp);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(EntityDetailApp.__proto__||Object.getPrototypeOf(EntityDetailApp)).call(this,props)),events=EXTERNAL_EVENTS.reduce(function(events,event){return props[event]&&(events[event]=props[event]),events},{});return _this.app=initApp("id",props,events),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(EntityDetailApp,_react2.default.Component),_createClass(EntityDetailApp,[{key:"render",value:function(){return _react2.default.createElement("div",null,this.app.renderComponent())}}]),EntityDetailApp}();EntityDetailApp.propTypes=_extends({entityName:_propTypes2.default.string.isRequired,formName:_propTypes2.default.string.isRequired,mode:_propTypes2.default.oneOf(["update","create"])},EXTERNAL_EVENTS.reduce(function(propTypes,event){return propTypes[event]=_propTypes2.default.func,propTypes},{})),exports.default=EntityDetailApp,EntityDetailApp.__docgenInfo={description:"",methods:[],displayName:"EntityDetailApp",props:{entityName:{type:{name:"string"},required:!0,description:""},formName:{type:{name:"string"},required:!0,description:""},mode:{type:{name:"enum",value:[{value:"'update'",computed:!1},{value:"'create'",computed:!1}]},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-detail/src/main.js"]={name:"EntityDetailApp",docgenInfo:EntityDetailApp.__docgenInfo,path:"packages/entity-detail/src/main.js"})},2891:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sagas=void 0;var _reducer2=_interopRequireDefault(__webpack_require__(556)),_entityDetail=__webpack_require__(2892),_entityDetail2=_interopRequireDefault(_entityDetail);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={entityDetail:_entityDetail2.default,form:_reducer2.default};exports.sagas=[_entityDetail.sagas]},2892:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sagas=void 0;var _reducer2=_interopRequireDefault(__webpack_require__(2893)),_sagas2=_interopRequireDefault(__webpack_require__(2894));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.sagas=_sagas2.default,exports.default=_reducer2.default},2893:function(module,exports,__webpack_require__){"use strict";var _ACTION_HANDLERS;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1],handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state};var obj,_reducer=__webpack_require__(45),_reducer2=(obj=_reducer)&&obj.__esModule?obj:{default:obj},actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2808));function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ACTION_HANDLERS=(_defineProperty(_ACTION_HANDLERS={},actions.SET_ENTITY_NAME,_reducer2.default.singleTransferReducer("entityName")),_defineProperty(_ACTION_HANDLERS,actions.SET_FORM_NAME,_reducer2.default.singleTransferReducer("formName")),_defineProperty(_ACTION_HANDLERS,actions.SET_ENTITY_ID,_reducer2.default.singleTransferReducer("entityId")),_defineProperty(_ACTION_HANDLERS,actions.SET_MODE,_reducer2.default.singleTransferReducer("mode")),_defineProperty(_ACTION_HANDLERS,actions.SET_FORM_DEFINITION,_reducer2.default.singleTransferReducer("formDefinition")),_defineProperty(_ACTION_HANDLERS,actions.SET_ENTITY,_reducer2.default.singleTransferReducer("entity")),_defineProperty(_ACTION_HANDLERS,actions.SET_LAST_SAVE,_reducer2.default.singleTransferReducer("lastSave")),_defineProperty(_ACTION_HANDLERS,actions.SET_ENTITY_MODEL,_reducer2.default.singleTransferReducer("entityModel")),_defineProperty(_ACTION_HANDLERS,actions.SET_TOUCHED,_reducer2.default.singleTransferReducer("touched")),_defineProperty(_ACTION_HANDLERS,actions.SET_SHOW_SUB_GRIDS_CREATE_BUTTON,_reducer2.default.singleTransferReducer("showSubGridCreateButton")),_defineProperty(_ACTION_HANDLERS,actions.SET_APP_ID,_reducer2.default.singleTransferReducer("appId")),_ACTION_HANDLERS),initialState={appId:"",entityName:"",formName:"",mode:"update",formDefinition:{},entity:{},entityModel:{},touched:!1,showSubGridCreateButton:!1}},2894:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.entityDetailSelector=exports.formInitialValueSelector=void 0,exports.default=sagas,exports.loadDetailFormDefinition=loadDetailFormDefinition,exports.loadEntity=loadEntity,exports.getTargetEntityName=getTargetEntityName,exports.unloadDetailView=unloadDetailView,exports.loadEntityModel=loadEntityModel,exports.loadDetailView=loadDetailView,exports.updateFormSubmit=updateFormSubmit,exports.createFormSubmit=createFormSubmit,exports.handleSubmitError=handleSubmitError,exports.getEntityForSubmit=getEntityForSubmit,exports.getFields=getFields,exports.submitForm=submitForm,exports.uploadDocument=uploadDocument,exports.fireTouched=fireTouched,exports.showNotification=showNotification,exports.loadData=loadData,exports.actionInvoked=actionInvoked;var _actions2=_interopRequireDefault(__webpack_require__(43)),_SubmissionError2=_interopRequireDefault(__webpack_require__(371)),_getFormValues2=_interopRequireDefault(__webpack_require__(557)),_externalEvents2=_interopRequireDefault(__webpack_require__(66)),_notifier2=_interopRequireDefault(__webpack_require__(75)),_errorLogging2=_interopRequireDefault(__webpack_require__(118)),_form2=_interopRequireDefault(__webpack_require__(87)),_actions4=_interopRequireDefault(__webpack_require__(184)),_actionEmitter2=_interopRequireDefault(__webpack_require__(130)),_rest2=_interopRequireDefault(__webpack_require__(47)),actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2808)),_entities=__webpack_require__(2895),_documents=__webpack_require__(2896),_asyncValidation=__webpack_require__(2833),_modes2=_interopRequireDefault(__webpack_require__(2816)),_effects=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var _marked=regeneratorRuntime.mark(sagas),_marked2=regeneratorRuntime.mark(loadDetailFormDefinition),_marked3=regeneratorRuntime.mark(loadEntity),_marked4=regeneratorRuntime.mark(getTargetEntityName),_marked5=regeneratorRuntime.mark(unloadDetailView),_marked6=regeneratorRuntime.mark(loadEntityModel),_marked7=regeneratorRuntime.mark(loadDetailView),_marked8=regeneratorRuntime.mark(updateFormSubmit),_marked9=regeneratorRuntime.mark(createFormSubmit),_marked10=regeneratorRuntime.mark(handleSubmitError),_marked11=regeneratorRuntime.mark(getEntityForSubmit),_marked12=regeneratorRuntime.mark(getFields),_marked13=regeneratorRuntime.mark(submitForm),_marked14=regeneratorRuntime.mark(uploadDocument),_marked15=regeneratorRuntime.mark(fireTouched),_marked16=regeneratorRuntime.mark(showNotification),_marked17=regeneratorRuntime.mark(loadData),_marked18=regeneratorRuntime.mark(actionInvoked),formInitialValueSelector=exports.formInitialValueSelector=function(formId){return function(state){return state.form[formId].initial}},entityDetailSelector=exports.entityDetailSelector=function(state){return state.entityDetail},FORM_ID="detailForm";function sagas(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.all)([(0,_effects.fork)(_effects.takeLatest,actions.LOAD_DETAIL_VIEW,loadDetailView),(0,_effects.fork)(_effects.takeLatest,actions.UNLOAD_DETAIL_VIEW,unloadDetailView),(0,_effects.fork)(_effects.takeEvery,actions.SUBMIT_FORM,submitForm),(0,_effects.fork)(_effects.takeEvery,actions.UPLOAD_DOCUMENT,uploadDocument),(0,_effects.fork)(_effects.takeEvery,actions.FIRE_TOUCHED,fireTouched),(0,_effects.fork)(_effects.takeEvery,_actions4.default.actions.ACTION_INVOKED,actionInvoked)]);case 2:case"end":return _context.stop()}},_marked,this)}function loadDetailFormDefinition(formName){var formDefinition;return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,_effects.call)(_form2.default.fetchForm,formName);case 2:return formDefinition=_context2.sent,_context2.next=5,(0,_effects.put)(actions.setFormDefinition(formDefinition));case 5:return _context2.abrupt("return",formDefinition);case 6:case"end":return _context2.stop()}},_marked2,this)}function loadEntity(entityName,entityId,formDefinition,formName){var fieldDefinitions,fields,entity;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,_effects.call)(_form2.default.getFieldDefinitions,formDefinition);case 2:return fieldDefinitions=_context3.sent,_context3.next=5,(0,_effects.call)(_form2.default.getFieldNames,fieldDefinitions);case 5:return fields=_context3.sent,_context3.next=8,(0,_effects.call)(_entities.fetchEntity,entityName,entityId,fields,formName);case 8:return entity=_context3.sent,_context3.next=11,(0,_effects.put)(actions.setEntity(entity));case 11:return _context3.abrupt("return",entity);case 12:case"end":return _context3.stop()}},_marked3,this)}function getTargetEntityName(entityName,modelPaths){var model,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,path,relation;return regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!(modelPaths&&modelPaths.length>0)){_context4.next=35;break}return _context4.next=3,(0,_effects.call)(_entities.fetchModel,entityName);case 3:model=_context4.sent,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_context4.prev=7,_iterator=modelPaths[Symbol.iterator]();case 9:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context4.next=21;break}if(path=_step.value,relation=model[path]){_context4.next=14;break}throw new Error("No such path '"+path+"' found on entity model '"+entityName+"'");case 14:return entityName=relation.targetEntity,_context4.next=17,(0,_effects.call)(_entities.fetchModel,entityName);case 17:model=_context4.sent;case 18:_iteratorNormalCompletion=!0,_context4.next=9;break;case 21:_context4.next=27;break;case 23:_context4.prev=23,_context4.t0=_context4.catch(7),_didIteratorError=!0,_iteratorError=_context4.t0;case 27:_context4.prev=27,_context4.prev=28,!_iteratorNormalCompletion&&_iterator.return&&_iterator.return();case 30:if(_context4.prev=30,!_didIteratorError){_context4.next=33;break}throw _iteratorError;case 33:return _context4.finish(30);case 34:return _context4.finish(27);case 35:return _context4.abrupt("return",entityName);case 36:case"end":return _context4.stop()}},_marked4,this,[[7,23,27,35],[28,,30,34]])}function unloadDetailView(){return regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,(0,_effects.put)(actions.setEntity(null));case 2:return _context5.next=4,(0,_effects.put)(_actions2.default.destroy(FORM_ID));case 4:case"end":return _context5.stop()}},_marked5,this)}function loadEntityModel(entityName){var entityModel;return regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,(0,_effects.call)(_entities.fetchModel,entityName);case 2:return entityModel=_context6.sent,_context6.next=5,(0,_effects.put)(actions.setEntityModel(entityModel));case 5:case"end":return _context6.stop()}},_marked6,this)}function loadDetailView(){var _ref,entityName,formName,mode,formDefinition,fieldDefinitions,defaultValues;return regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,(0,_effects.select)(entityDetailSelector);case 2:return _ref=_context7.sent,entityName=_ref.entityName,formName=_ref.formName,mode=_ref.mode,_context7.next=8,(0,_effects.call)(loadEntityModel,entityName);case 8:return _context7.next=10,(0,_effects.call)(loadDetailFormDefinition,formName);case 10:if(formDefinition=_context7.sent,mode!==_modes2.default.CREATE){_context7.next=24;break}return _context7.next=14,(0,_effects.put)(actions.setEntity({paths:{},model:entityName}));case 14:return _context7.next=16,(0,_effects.call)(_form2.default.getFieldDefinitions,formDefinition);case 16:return fieldDefinitions=_context7.sent,_context7.next=19,(0,_effects.call)(_form2.default.getDefaultValues,fieldDefinitions);case 19:return defaultValues=_context7.sent,_context7.next=22,(0,_effects.put)(_actions2.default.initialize(FORM_ID,defaultValues));case 22:_context7.next=26;break;case 24:return _context7.next=26,(0,_effects.call)(loadData);case 26:case"end":return _context7.stop()}},_marked7,this)}function updateFormSubmit(entity,fields){var updatedEntity,updatedFormValues;return regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,(0,_effects.call)(_entities.updateEntity,entity,fields);case 2:return updatedEntity=_context8.sent,_context8.next=5,(0,_effects.call)(_form2.default.entityToFormValues,updatedEntity);case 5:return updatedFormValues=_context8.sent,_context8.next=8,(0,_effects.put)(_actions2.default.initialize(FORM_ID,updatedFormValues));case 8:return _context8.next=10,(0,_effects.call)(showNotification,"success","saveSuccessfulTitle","saveSuccessfulMessage");case 10:return _context8.next=12,(0,_effects.put)(actions.setLastSave());case 12:return _context8.next=14,(0,_effects.put)(_actions2.default.stopSubmit(FORM_ID));case 14:case"end":return _context8.stop()}},_marked8,this)}function createFormSubmit(entity,fields){var createdEntityId;return regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,(0,_effects.call)(_entities.createEntity,entity,fields);case 2:return createdEntityId=_context9.sent,_context9.next=5,(0,_effects.put)(_externalEvents2.default.fireExternalEvent("onEntityCreated",{id:createdEntityId}));case 5:return _context9.next=7,(0,_effects.call)(showNotification,"success","createSuccessfulTitle","createSuccessfulMessage");case 7:case"end":return _context9.stop()}},_marked9,this)}function handleSubmitError(error){return regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(!(error instanceof _SubmissionError2.default)){_context10.next=7;break}return _context10.next=3,(0,_effects.put)(_actions2.default.touch.apply(_actions2.default,[FORM_ID].concat(_toConsumableArray(Object.keys(error.errors)))));case 3:return _context10.next=5,(0,_effects.put)(_actions2.default.stopSubmit(FORM_ID,error.errors));case 5:_context10.next=12;break;case 7:if(error instanceof _rest2.default.ClientQuestionCancelledException){_context10.next=10;break}return _context10.next=10,(0,_effects.put)(_errorLogging2.default.logError("client.common.unexpectedError","client.entity-detail.saveError",error));case 10:return _context10.next=12,(0,_effects.put)(_actions2.default.stopSubmit(FORM_ID));case 12:return _context10.next=14,(0,_effects.call)(showNotification,"warning","saveAbortedTitle","saveAbortedMessage",5e3);case 14:case"end":return _context10.stop()}},_marked10,this)}function getEntityForSubmit(){var values,initialValues,_ref2,entityName,entityId,entityModel,mode,dirtyFields;return regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return _context11.next=2,(0,_effects.select)((0,_getFormValues2.default)(FORM_ID));case 2:return values=_context11.sent,_context11.next=5,(0,_effects.select)(formInitialValueSelector(FORM_ID));case 5:return initialValues=_context11.sent,_context11.next=8,(0,_effects.put)(_actions2.default.startSubmit(FORM_ID));case 8:return _context11.next=10,(0,_effects.select)(entityDetailSelector);case 10:return _ref2=_context11.sent,entityName=_ref2.entityName,entityId=_ref2.entityId,entityModel=_ref2.entityModel,mode=_ref2.mode,_context11.next=17,(0,_effects.call)(_asyncValidation.submitValidate,values,initialValues,entityName,entityId,entityModel,mode);case 17:return _context11.next=19,(0,_effects.call)(_form2.default.getDirtyFields,initialValues,values,mode===_modes2.default.CREATE);case 19:return dirtyFields=_context11.sent,_context11.next=22,(0,_effects.call)(_form2.default.formValuesToEntity,values,dirtyFields,entityName,entityId,entityModel);case 22:return _context11.abrupt("return",_context11.sent);case 23:case"end":return _context11.stop()}},_marked11,this)}function getFields(){var _ref3,formDefinition,fieldDefinitions;return regeneratorRuntime.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return _context12.next=2,(0,_effects.select)(entityDetailSelector);case 2:return _ref3=_context12.sent,formDefinition=_ref3.formDefinition,_context12.next=6,(0,_effects.call)(_form2.default.getFieldDefinitions,formDefinition);case 6:return fieldDefinitions=_context12.sent,_context12.next=9,(0,_effects.call)(_form2.default.getFieldNames,fieldDefinitions);case 9:return _context12.abrupt("return",_context12.sent);case 10:case"end":return _context12.stop()}},_marked12,this)}function submitForm(){var _ref4,mode,entity,fields;return regeneratorRuntime.wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return _context13.prev=0,_context13.next=3,(0,_effects.select)(entityDetailSelector);case 3:return _ref4=_context13.sent,mode=_ref4.mode,_context13.next=7,(0,_effects.call)(getEntityForSubmit);case 7:return entity=_context13.sent,_context13.next=10,(0,_effects.call)(getFields);case 10:if(fields=_context13.sent,mode!==_modes2.default.UPDATE){_context13.next=16;break}return _context13.next=14,(0,_effects.call)(updateFormSubmit,entity,fields);case 14:_context13.next=19;break;case 16:if(mode!==_modes2.default.CREATE){_context13.next=19;break}return _context13.next=19,(0,_effects.call)(createFormSubmit,entity,fields);case 19:_context13.next=25;break;case 21:return _context13.prev=21,_context13.t0=_context13.catch(0),_context13.next=25,(0,_effects.call)(handleSubmitError,_context13.t0);case 25:case"end":return _context13.stop()}},_marked13,this,[[0,21]])}function uploadDocument(_ref5){var file,field,uploadResponse,documentFormValue,payload=_ref5.payload;return regeneratorRuntime.wrap(function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return file=payload.file,field=payload.field,_context14.prev=1,_context14.next=4,(0,_effects.call)(_documents.uploadRequest,file);case 4:if(!(uploadResponse=_context14.sent).success){_context14.next=13;break}return _context14.next=8,(0,_effects.call)(_documents.documentToFormValueTransformer,uploadResponse,file);case 8:return documentFormValue=_context14.sent,_context14.next=11,(0,_effects.put)(_actions2.default.change(FORM_ID,field,documentFormValue));case 11:_context14.next=14;break;case 13:throw new Error("upload not successful: "+JSON.stringify(uploadResponse));case 14:_context14.next=22;break;case 16:return _context14.prev=16,_context14.t0=_context14.catch(1),_context14.next=20,(0,_effects.put)(_actions2.default.change(FORM_ID,field,{id:null,timestamp:Date.now()}));case 20:return _context14.next=22,(0,_effects.put)(_errorLogging2.default.logError("client.component.form.uploadFailedTitle","client.component.form.uploadFailedMessage",_context14.t0));case 22:case"end":return _context14.stop()}},_marked14,this,[[1,16]])}function fireTouched(_ref6){var actionTouched,_ref7,stateTouched,payload=_ref6.payload;return regeneratorRuntime.wrap(function(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:return actionTouched=payload.touched,_context15.next=3,(0,_effects.select)(entityDetailSelector);case 3:if(_ref7=_context15.sent,stateTouched=_ref7.touched,actionTouched===stateTouched){_context15.next=10;break}return _context15.next=8,(0,_effects.put)(_externalEvents2.default.fireExternalEvent("onTouchedChange",{touched:actionTouched}));case 8:return _context15.next=10,(0,_effects.put)(actions.setTouched(actionTouched));case 10:case"end":return _context15.stop()}},_marked15,this)}function showNotification(type,titleResourceName,messageResourceName){var duration=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return regeneratorRuntime.wrap(function(_context16){for(;;)switch(_context16.prev=_context16.next){case 0:return _context16.next=2,(0,_effects.put)(_notifier2.default.info(type,"client.entity-detail."+titleResourceName,"client.entity-detail."+messageResourceName,"check",duration));case 2:case"end":return _context16.stop()}},_marked16,this)}function loadData(){var _ref8,entityName,entityId,formName,formDefinition,entity,formValues;return regeneratorRuntime.wrap(function(_context17){for(;;)switch(_context17.prev=_context17.next){case 0:return _context17.next=2,(0,_effects.select)(entityDetailSelector);case 2:return _ref8=_context17.sent,entityName=_ref8.entityName,entityId=_ref8.entityId,formName=_ref8.formName,formDefinition=_ref8.formDefinition,_context17.next=9,(0,_effects.call)(loadEntity,entityName,entityId,formDefinition,formName);case 9:return entity=_context17.sent,_context17.next=12,(0,_effects.call)(_form2.default.entityToFormValues,entity);case 12:return formValues=_context17.sent,_context17.next=15,(0,_effects.put)(_actions2.default.initialize(FORM_ID,formValues,{keepDirty:!0}));case 15:case"end":return _context17.stop()}},_marked17,this)}function actionInvoked(action){return regeneratorRuntime.wrap(function(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:return _context18.next=2,(0,_effects.call)(loadData);case 2:return _context18.next=4,(0,_effects.put)(_actionEmitter2.default.emitAction(action));case 4:case"end":return _context18.stop()}},_marked18,this)}},2895:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectEntitiesTransformer=exports.defaultEntitiesTransformer=exports.defaultModelTransformer=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.fetchEntity=fetchEntity,exports.updateEntity=updateEntity,exports.createEntity=createEntity,exports.fetchModel=fetchModel,exports.fetchEntities=fetchEntities;var _SubmissionError2=_interopRequireDefault(__webpack_require__(371)),_form2=_interopRequireDefault(__webpack_require__(87)),_rest2=_interopRequireDefault(__webpack_require__(47)),_effects=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(fetchEntity),_marked2=regeneratorRuntime.mark(updateEntity),_marked3=regeneratorRuntime.mark(createEntity),_marked4=regeneratorRuntime.mark(fetchModel),_marked5=regeneratorRuntime.mark(fetchEntities);function fetchEntity(entityName,id,fields,formName){var options,resp;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return options={queryParams:{_paths:fields.join(","),_form:formName}},_context.next=3,(0,_effects.call)(_rest2.default.requestSaga,"entities/"+entityName+"/"+id,options);case 3:return resp=_context.sent,_context.abrupt("return",resp.body);case 5:case"end":return _context.stop()}},_marked,this)}function updateEntity(entity){var options,resource,resp,fields=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return options={method:"PATCH",queryParams:{_paths:fields.join(",")},body:entity,acceptedErrorCodes:["VALIDATION_FAILED"]},resource="entities/"+entity.model+"/"+entity.key,_context2.next=4,(0,_effects.call)(_rest2.default.requestSaga,resource,options);case 4:if("VALIDATION_FAILED"!==(resp=_context2.sent).body.errorCode){_context2.next=7;break}throw new _SubmissionError2.default(_form2.default.validationErrorToFormError(entity,resp.body.errors));case 7:return _context2.abrupt("return",resp.body);case 8:case"end":return _context2.stop()}},_marked2,this)}var SUCCESSFUL_SAVED_STATUS=201;function createEntity(entity){var options,resource,resp,location,id,fields=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return options={method:"POST",queryParams:{_paths:fields.join(",")},body:entity,acceptedErrorCodes:["VALIDATION_FAILED"]},resource="entities/"+entity.model,_context3.next=4,(0,_effects.call)(_rest2.default.requestSaga,resource,options);case 4:if((resp=_context3.sent).status!==SUCCESSFUL_SAVED_STATUS){_context3.next=11;break}return location=resp.headers.get("Location"),id=location.split("/").pop(),_context3.abrupt("return",id);case 11:if(!resp.body||"VALIDATION_FAILED"!==resp.body.errorCode){_context3.next=13;break}throw new _SubmissionError2.default(_form2.default.validationErrorToFormError(entity,resp.body.errors));case 13:throw new Error("unexpected error during save",resp);case 14:case"end":return _context3.stop()}},_marked3,this)}var defaultModelTransformer=exports.defaultModelTransformer=function(json){var model={};return json.fields.forEach(function(field){model[field.fieldName]=_extends({},field)}),json.relations.forEach(function(relation){model[relation.relationName]=_extends({type:"relation"},relation)}),model};function fetchModel(entityName){var resp,transformer=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultModelTransformer;return regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,(0,_effects.call)(_rest2.default.requestSaga,"entities/"+entityName+"/model");case 2:return resp=_context4.sent,_context4.next=5,(0,_effects.call)(transformer,resp.body);case 5:return _context4.abrupt("return",_context4.sent);case 6:case"end":return _context4.stop()}},_marked4,this)}var defaultEntitiesTransformer=exports.defaultEntitiesTransformer=function(json){return json};exports.selectEntitiesTransformer=function(json){return json.data.map(function(e){return{display:e.display,key:e.key}})};function buildParams(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$page=_ref.page,page=void 0===_ref$page?void 0:_ref$page,_ref$orderBy=_ref.orderBy,orderBy=void 0===_ref$orderBy?{}:_ref$orderBy,_ref$limit=_ref.limit,limit=void 0===_ref$limit?void 0:_ref$limit,_ref$paths=_ref.paths,paths=void 0===_ref$paths?[]:_ref$paths,_ref$fields=_ref.fields,fields=void 0===_ref$fields?void 0:_ref$fields,_ref$relations=_ref.relations,relations=void 0===_ref$relations?void 0:_ref$relations,_ref$searchFilters=_ref.searchFilters,searchFilters=void 0===_ref$searchFilters?[]:_ref$searchFilters,_ref$searchInputs=_ref.searchInputs,searchInputs=void 0===_ref$searchInputs?{}:_ref$searchInputs,_ref$formName=_ref.formName,formName=void 0===_ref$formName?void 0:_ref$formName,params=_extends({_sort:2===Object.keys(orderBy||{}).length?orderBy.name+" "+orderBy.direction:void 0,_paths:paths.join(","),_fields:fields&&0===fields.length?"!":fields?fields.join(","):null,_relations:relations&&0===relations.length?"!":relations?relations.join(","):null,_form:formName,_filter:searchFilters.join(",")},searchInputs);return limit&&(params._limit=limit,page&&(params._offset=(page-1)*limit)),params}function fetchEntities(entityName,searchInputs){var queryParams,resp,transformer=arguments.length>2&&void 0!==arguments[2]?arguments[2]:defaultEntitiesTransformer;return regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return queryParams=buildParams(searchInputs),_context5.next=3,(0,_effects.call)(_rest2.default.requestSaga,"entities/"+entityName,{queryParams:queryParams});case 3:return resp=_context5.sent,_context5.next=6,(0,_effects.call)(transformer,resp.body);case 6:return _context5.abrupt("return",_context5.sent);case 7:case"end":return _context5.stop()}},_marked5,this)}},2896:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.documentToFormValueTransformer=exports.uploadRequest=void 0;var obj,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_pick2=__webpack_require__(367),_pick3=(obj=_pick2)&&obj.__esModule?obj:{default:obj};exports.uploadRequest=function(file){var data=new FormData;return data.append("file",file),fetch("/nice2/upload",{method:"POST",credentials:"include",body:data}).then(function(response){return response.json()})},exports.documentToFormValueTransformer=function(uploadResponse,file){var responseAttributes=(0,_pick3.default)(uploadResponse,["id","fileName"]),mimeType=uploadResponse.contentType;return _extends({},responseAttributes,{binaryLink:file.preview,thumbnailLink:mimeType.startsWith("image")?file.preview:null})}},2897:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _reactRedux=__webpack_require__(26),_reactIntl=__webpack_require__(9),_getFormInitialValues2=_interopRequireDefault(__webpack_require__(2835)),_errorLogging2=_interopRequireDefault(__webpack_require__(118)),_actions=__webpack_require__(2808),_DetailView2=_interopRequireDefault(__webpack_require__(2898));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapActionCreators={loadDetailView:_actions.loadDetailView,unloadDetailView:_actions.unloadDetailView,logError:_errorLogging2.default.logError};exports.default=(0,_reactRedux.connect)(function(state,props){return{entityName:state.entityDetail.entityName,entityId:state.entityDetail.entityId,entityModel:state.entityDetail.entityModel,mode:state.entityDetail.mode,formInitialValues:(0,_getFormInitialValues2.default)("detailForm")(state)}},mapActionCreators)((0,_reactIntl.injectIntl)(_DetailView2.default))},2898:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactIntl=__webpack_require__(9),_isEmpty3=_interopRequireDefault(__webpack_require__(370)),_form2=_interopRequireDefault(__webpack_require__(87)),_toccoUi=__webpack_require__(20),_DetailFormContainer2=_interopRequireDefault(__webpack_require__(2899)),_asyncValidation=__webpack_require__(2833);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}var DetailView=function(_React$Component){function DetailView(){var _ref,_temp,_this;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DetailView);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=DetailView.__proto__||Object.getPrototypeOf(DetailView)).call.apply(_ref,[this].concat(args))),_this.handledAsyncValidate=function(values){return(0,_asyncValidation.asyncValidate)(values,_this.props.formInitialValues,_this.props.entityName,_this.props.entityId,_this.props.entityModel,_this.props.mode).catch(function(error){if(error instanceof _asyncValidation.AsyncValidationException)throw error.errors;_this.props.logError("client.common.unexpectedError","client.entity-detail.validationError",error)})},_this.getSyncValidation=function(){return _this.validateSingleton||(0,_isEmpty3.default)(_this.props.entityModel)||(_this.validateSingleton=_form2.default.syncValidation(_this.props.entityModel)),_this.validateSingleton},_this.msg=function(id){return _this.props.intl.formatMessage({id:id})},_possibleConstructorReturn(_this,_temp)}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DetailView,_react2.default.Component),_createClass(DetailView,[{key:"componentWillUnmount",value:function(){this.props.unloadDetailView()}},{key:"render",value:function(){var props=this.props;return _react2.default.createElement("div",{className:"detail-view"},_react2.default.createElement(_toccoUi.LoadMask,{required:[props.formInitialValues],loadingText:this.msg("client.entity-detail.loadingText")},_react2.default.createElement(_DetailFormContainer2.default,{mode:this.props.mode,validate:this.getSyncValidation(),asyncValidate:this.handledAsyncValidate})))}}]),DetailView}();exports.default=DetailView,DetailView.propTypes={intl:_reactIntl.intlShape.isRequired,mode:_propTypes2.default.oneOf(["update","create"]),loadDetailView:_propTypes2.default.func.isRequired,unloadDetailView:_propTypes2.default.func.isRequired,logError:_propTypes2.default.func.isRequired,entityModel:_propTypes2.default.object.isRequired,entityName:_propTypes2.default.string.isRequired,entityId:_propTypes2.default.string,formInitialValues:_propTypes2.default.shape({initial:_propTypes2.default.objectOf(_propTypes2.default.string)})},DetailView.__docgenInfo={description:"",methods:[{name:"handledAsyncValidate",docblock:null,modifiers:[],params:[{name:"values",type:null}],returns:null},{name:"getSyncValidation",docblock:null,modifiers:[],params:[],returns:null},{name:"msg",docblock:null,modifiers:[],params:[{name:"id",type:null}],returns:null}],displayName:"DetailView",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},mode:{type:{name:"enum",value:[{value:"'update'",computed:!1},{value:"'create'",computed:!1}]},required:!1,description:""},loadDetailView:{type:{name:"func"},required:!0,description:""},unloadDetailView:{type:{name:"func"},required:!0,description:""},logError:{type:{name:"func"},required:!0,description:""},entityModel:{type:{name:"object"},required:!0,description:""},entityName:{type:{name:"string"},required:!0,description:""},entityId:{type:{name:"string"},required:!1,description:""},formInitialValues:{type:{name:"shape",value:{initial:{name:"objectOf",value:{name:"string"},required:!1}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-detail/src/components/DetailView/DetailView.js"]={name:"DetailView",docgenInfo:DetailView.__docgenInfo,path:"packages/entity-detail/src/components/DetailView/DetailView.js"})},2899:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_reactRedux=__webpack_require__(26),_reactIntl=__webpack_require__(9),_get3=_interopRequireDefault(__webpack_require__(119)),_getFormValues2=_interopRequireDefault(__webpack_require__(557)),_getFormInitialValues2=_interopRequireDefault(__webpack_require__(2835)),_getFormSyncErrors2=_interopRequireDefault(__webpack_require__(2916)),_getFormAsyncErrors2=_interopRequireDefault(__webpack_require__(2917)),_getFormSubmitErrors2=_interopRequireDefault(__webpack_require__(2918)),_errorLogging2=_interopRequireDefault(__webpack_require__(118)),_formData2=_interopRequireDefault(__webpack_require__(270)),_DetailForm2=_interopRequireDefault(__webpack_require__(2900)),_actions=__webpack_require__(2808);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapActionCreators={unloadDetailView:_actions.unloadDetailView,submitForm:_actions.submitForm,loadRelationEntities:_formData2.default.loadRelationEntities,loadTooltip:_formData2.default.loadTooltip,uploadDocument:_actions.uploadDocument,logError:_errorLogging2.default.logError,fireTouched:_actions.fireTouched,openAdvancedSearch:_formData2.default.openAdvancedSearch,changeFieldValue:_formData2.default.changeFieldValue};exports.default=(0,_reactRedux.connect)(function(state){return{formDefinition:state.entityDetail.formDefinition,entity:state.entityDetail.entity,relationEntities:_formData2.default.relationEntitiesSelector(state),tooltips:_formData2.default.tooltipSelector(state),entityModel:state.entityDetail.entityModel,formValues:(0,_getFormValues2.default)("detailForm")(state),formErrors:_extends({},(0,_getFormSyncErrors2.default)("detailForm")(state),(0,_getFormAsyncErrors2.default)("detailForm")(state),(0,_getFormSubmitErrors2.default)("detailForm")(state),{_error:(formName="detailForm",function(state){return(0,_get3.default)(state,"form."+formName+".error",{})})(state)}),formInitialValues:(0,_getFormInitialValues2.default)("detailForm")(state),lastSave:state.entityDetail.lastSave};var formName},mapActionCreators)((0,_reactIntl.injectIntl)(_DetailForm2.default))},2900:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetailForm=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_reduxForm2=_interopRequireDefault(__webpack_require__(372)),_reactIntl=__webpack_require__(9),_toccoUi=__webpack_require__(20),_form2=_interopRequireDefault(__webpack_require__(87)),_formField2=_interopRequireDefault(__webpack_require__(366)),_subGrid2=_interopRequireDefault(__webpack_require__(2834)),_ErrorBox2=_interopRequireDefault(__webpack_require__(2904)),_modes2=_interopRequireDefault(__webpack_require__(2816)),_readOnlyFormFieldMapping2=_interopRequireDefault(__webpack_require__(2906)),_StyledDetailForm2=_interopRequireDefault(__webpack_require__(2907));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DetailForm=exports.DetailForm=function(_React$Component){function DetailForm(props){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DetailForm);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(DetailForm.__proto__||Object.getPrototypeOf(DetailForm)).call(this,props));return _initialiseProps.call(_this),_this.formBuilder=_this.createFormBuilder(props),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(DetailForm,_react2.default.Component),_createClass(DetailForm,[{key:"componentWillReceiveProps",value:function(nextProps){this.formBuilder=this.createFormBuilder(nextProps),this.props.fireTouched(nextProps.anyTouched)}},{key:"render",value:function(){var props=this.props;return this.isEntityLoaded()?_react2.default.createElement(_StyledDetailForm2.default,null,_react2.default.createElement("form",{className:"form-horizontal detail-form",tabIndex:"0",onSubmit:this.handleSubmit,onKeyDown:this.handleKeyPress},this.formBuilder(),!this.isReadOnlyForm()&&_react2.default.createElement("div",null,!props.valid&&props.anyTouched&&_react2.default.createElement(_ErrorBox2.default,{formErrors:props.formErrors,showErrors:this.showErrors}),_react2.default.createElement(_toccoUi.Button,{disabled:props.submitting||props.anyTouched&&!props.valid,ink:"primary",label:this.msg("client.entity-detail."+(props.mode===_modes2.default.CREATE?"create":"save")),look:"raised",pending:props.submitting,type:"submit"}),props.lastSave&&_react2.default.createElement("div",null,_react2.default.createElement(_reactIntl.FormattedMessage,{id:"client.entity-detail.lastSave"}),_react2.default.createElement("span",{style:{marginLeft:"3px"}}," ",_react2.default.createElement(_reactIntl.FormattedRelative,{value:props.lastSave})))))):_react2.default.createElement("div",null)}}]),DetailForm}(),_initialiseProps=function(){var _this2=this;this.createFormBuilder=function(props){var obj,key,value,formFieldUtils={relationEntities:props.relationEntities,loadRelationEntities:props.loadRelationEntities,loadTooltip:props.loadTooltip,tooltips:props.tooltips,uploadDocument:props.uploadDocument,intl:_this2.props.intl,openAdvancedSearch:props.openAdvancedSearch,changeFieldValue:props.changeFieldValue};return _form2.default.initFormBuilder(props.entity,props.entityModel,props.form,props.formDefinition,props.formValues,formFieldUtils,_formField2.default.defaultMapping,_readOnlyFormFieldMapping2.default,void 0,props.mode,(obj={},key=_form2.default.componentTypes.SUB_TABLE,value=(0,_subGrid2.default)(),key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj))},this.isReadOnlyForm=function(){return _this2.props.formDefinition.readonly},this.isEntityLoaded=function(){return _this2.props.entity&&_this2.props.entity.paths},this.touchFieldsWithError=function(){Object.keys(_form2.default.formErrorsUtil.getFieldErrors(_this2.props.formErrors)).forEach(function(f){return _this2.props.touch(f)})},this.focusErrorFields=function(){var firstErrorField=_form2.default.formErrorsUtil.getFirstErrorField(_this2.props.formErrors);firstErrorField&&document.getElementById(_form2.default.getFieldId(_this2.props.form,firstErrorField)).focus()},this.save=function(){_this2.props.valid?_this2.props.submitForm():_this2.props.formErrors&&_this2.touchFieldsWithError()},this.handleSubmit=function(event){event.preventDefault(),_this2.save()},this.handleKeyPress=function(event){event.ctrlKey&&"s"===event.key&&(event.preventDefault(),_this2.save()),"Enter"===event.key&&"TEXTAREA"!==event.target.tagName&&event.preventDefault()},this.showErrors=function(event){event.preventDefault(),_this2.touchFieldsWithError(),_this2.focusErrorFields()},this.msg=function(id){return _this2.props.intl.formatMessage({id:id})}};DetailForm.propTypes={intl:_reactIntl.intlShape.isRequired,mode:_propTypes2.default.oneOf(["update","create"]),entityModel:_propTypes2.default.object.isRequired,submitForm:_propTypes2.default.func.isRequired,formDefinition:_propTypes2.default.object.isRequired,entity:_propTypes2.default.object.isRequired,formValues:_propTypes2.default.object,uploadDocument:_propTypes2.default.func.isRequired,loadRelationEntities:_propTypes2.default.func.isRequired,openAdvancedSearch:_propTypes2.default.func.isRequired,changeFieldValue:_propTypes2.default.func.isRequired,relationEntities:_propTypes2.default.shape({entityName:_propTypes2.default.shape({loaded:_propTypes2.default.bool,data:_propTypes2.default.arrayOf(_propTypes2.default.shape({value:_propTypes2.default.string,label:_propTypes2.default.string}))})}).isRequired,form:_propTypes2.default.string.isRequired,touch:_propTypes2.default.func.isRequired,submitting:_propTypes2.default.bool,anyTouched:_propTypes2.default.bool,formErrors:_propTypes2.default.object,valid:_propTypes2.default.bool,lastSave:_propTypes2.default.number,fireTouched:_propTypes2.default.func.isRequired},exports.default=(0,_reduxForm2.default)({form:"detailForm",destroyOnUnmount:!1})(DetailForm),DetailForm.__docgenInfo={description:"",methods:[{name:"createFormBuilder",docblock:null,modifiers:[],params:[{name:"props",type:null}],returns:null},{name:"isReadOnlyForm",docblock:null,modifiers:[],params:[],returns:null},{name:"isEntityLoaded",docblock:null,modifiers:[],params:[],returns:null},{name:"touchFieldsWithError",docblock:null,modifiers:[],params:[],returns:null},{name:"focusErrorFields",docblock:null,modifiers:[],params:[],returns:null},{name:"save",docblock:null,modifiers:[],params:[],returns:null},{name:"handleSubmit",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"handleKeyPress",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"showErrors",docblock:null,modifiers:[],params:[{name:"event",type:null}],returns:null},{name:"msg",docblock:null,modifiers:[],params:[{name:"id",type:null}],returns:null}],displayName:"DetailForm",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},mode:{type:{name:"enum",value:[{value:"'update'",computed:!1},{value:"'create'",computed:!1}]},required:!1,description:""},entityModel:{type:{name:"object"},required:!0,description:""},submitForm:{type:{name:"func"},required:!0,description:""},formDefinition:{type:{name:"object"},required:!0,description:""},entity:{type:{name:"object"},required:!0,description:""},formValues:{type:{name:"object"},required:!1,description:""},uploadDocument:{type:{name:"func"},required:!0,description:""},loadRelationEntities:{type:{name:"func"},required:!0,description:""},openAdvancedSearch:{type:{name:"func"},required:!0,description:""},changeFieldValue:{type:{name:"func"},required:!0,description:""},relationEntities:{type:{name:"shape",value:{entityName:{name:"shape",value:{loaded:{name:"bool",required:!1},data:{name:"arrayOf",value:{name:"shape",value:{value:{name:"string",required:!1},label:{name:"string",required:!1}}},required:!1}},required:!1}}},required:!0,description:""},form:{type:{name:"string"},required:!0,description:""},touch:{type:{name:"func"},required:!0,description:""},submitting:{type:{name:"bool"},required:!1,description:""},anyTouched:{type:{name:"bool"},required:!1,description:""},formErrors:{type:{name:"object"},required:!1,description:""},valid:{type:{name:"bool"},required:!1,description:""},lastSave:{type:{name:"number"},required:!1,description:""},fireTouched:{type:{name:"func"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-detail/src/components/DetailForm/DetailForm.js"]={name:"DetailForm",docgenInfo:DetailForm.__docgenInfo,path:"packages/entity-detail/src/components/DetailForm/DetailForm.js"})},2901:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _reactRedux=__webpack_require__(26),_externalEvents2=_interopRequireDefault(__webpack_require__(66)),_actionEmitter2=_interopRequireDefault(__webpack_require__(130)),_SubGrid2=_interopRequireDefault(__webpack_require__(2902));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapActionCreators={onRowClick:function(e){return _externalEvents2.default.fireExternalEvent("onSubGridRowClick",{id:e.id,gridName:e.gridName,relationName:e.relationName})},onNavigateToCreate:function(e){return _externalEvents2.default.fireExternalEvent("onSubGridNavigateToCreate",{gridName:e.gridName,relationName:e.relationName})},dispatchEmittedAction:_actionEmitter2.default.dispatchEmittedAction};exports.default=(0,_reactRedux.connect)(function(state,props){return{appId:state.entityDetail.appId,entityKey:state.entityDetail.entity.key,entityName:state.entityDetail.entity.model,detailFormName:state.entityDetail.formDefinition.id,showSubGridsCreateButton:state.entityDetail.showSubGridCreateButton}},mapActionCreators)(_SubGrid2.default)},2902:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_SubGrid=__webpack_require__(2903),_SubGrid2=(obj=_SubGrid)&&obj.__esModule?obj:{default:obj};exports.default=_SubGrid2.default},2903:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_main2=_interopRequireDefault(__webpack_require__(1222));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SubGrid=function(props){var formBase=props.detailFormName+"_"+props.gridName;return _react2.default.createElement("div",null,_react2.default.createElement(_main2.default,{id:props.appId+"-subgrid-"+formBase,keepStore:!0,entityName:props.modelField.targetEntity,formBase:formBase,limit:props.limit,showSearchForm:props.showSearchForm,onRowClick:function(e){props.onRowClick&&props.onRowClick({id:e.id,gridName:props.gridName,relationName:props.relationName})},onNavigateToCreate:function(e){props.onNavigateToCreate({gridName:props.gridName,relationName:props.relationName})},showCreateButton:props.showSubGridsCreateButton,emitAction:function(action){props.dispatchEmittedAction(action)},parent:{key:props.entityKey,reverseRelationName:props.modelField.reverseRelationName,model:props.entityName}}))};SubGrid.defaultProps={limit:5},SubGrid.propTypes={entityKey:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]),entityName:_propTypes2.default.string.isRequired,detailFormName:_propTypes2.default.string.isRequired,gridName:_propTypes2.default.string.isRequired,relationName:_propTypes2.default.string.isRequired,modelField:_propTypes2.default.shape({targetEntity:_propTypes2.default.string,reverseRelationName:_propTypes2.default.string}).isRequired,onRowClick:_propTypes2.default.func,onNavigateToCreate:_propTypes2.default.func.isRequired,dispatchEmittedAction:_propTypes2.default.func.isRequired,showSubGridsCreateButton:_propTypes2.default.bool,appId:_propTypes2.default.string,showSearchForm:_propTypes2.default.bool,limit:_propTypes2.default.number},exports.default=SubGrid,SubGrid.__docgenInfo={description:"",methods:[],displayName:"SubGrid",props:{limit:{defaultValue:{value:"5",computed:!1},type:{name:"number"},required:!1,description:""},entityKey:{type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1,description:""},entityName:{type:{name:"string"},required:!0,description:""},detailFormName:{type:{name:"string"},required:!0,description:""},gridName:{type:{name:"string"},required:!0,description:""},relationName:{type:{name:"string"},required:!0,description:""},modelField:{type:{name:"shape",value:{targetEntity:{name:"string",required:!1},reverseRelationName:{name:"string",required:!1}}},required:!0,description:""},onRowClick:{type:{name:"func"},required:!1,description:""},onNavigateToCreate:{type:{name:"func"},required:!0,description:""},dispatchEmittedAction:{type:{name:"func"},required:!0,description:""},showSubGridsCreateButton:{type:{name:"bool"},required:!1,description:""},appId:{type:{name:"string"},required:!1,description:""},showSearchForm:{type:{name:"bool"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/entity-detail/src/components/SubGrid/SubGrid.js"]={name:"SubGrid",docgenInfo:SubGrid.__docgenInfo,path:"packages/entity-detail/src/components/SubGrid/SubGrid.js"})},2904:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_ErrorBox=__webpack_require__(2905),_ErrorBox2=(obj=_ErrorBox)&&obj.__esModule?obj:{default:obj};exports.default=_ErrorBox2.default},2905:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _propTypes2=_interopRequireDefault(__webpack_require__(7)),_react2=_interopRequireDefault(__webpack_require__(0)),_reactIntl=__webpack_require__(9),_toccoUi=__webpack_require__(20),_form2=_interopRequireDefault(__webpack_require__(87));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ErrorBox=function(_ref){var formErrors=_ref.formErrors,showErrors=_ref.showErrors,output=null,elements=[];return _form2.default.formErrorsUtil.hasFieldErrors(formErrors)&&elements.push(_react2.default.createElement(_toccoUi.SignalList.Item,{condition:_toccoUi.stylingCondition.DANGER,key:"hasFieldErrors"},_react2.default.createElement(_toccoUi.Link,{label:_react2.default.createElement(_reactIntl.FormattedMessage,{id:"client.entity-detail.invalidFieldsError"}),neutral:!0,onClick:showErrors}))),_form2.default.formErrorsUtil.hasValidatorErrors(formErrors)&&elements.push(_react2.default.createElement(_toccoUi.SignalList.Item,{condition:_toccoUi.stylingCondition.DANGER,key:"hasValidatorErrors"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"client.entity-detail.validatorErrors"}),_react2.default.createElement(_toccoUi.SignalList.List,null,_form2.default.formErrorsUtil.getValidatorErrors(formErrors).map(function(message,idx){return _react2.default.createElement(_toccoUi.SignalList.Item,{condition:_toccoUi.stylingCondition.DANGER,key:idx,label:message})})))),_form2.default.formErrorsUtil.hasRelatedEntityErrors(formErrors)&&elements.push(_react2.default.createElement(_toccoUi.SignalList.Item,{condition:_toccoUi.stylingCondition.DANGER,key:"hasRelatedEntityErrors"},_react2.default.createElement(_reactIntl.FormattedMessage,{id:"client.entity-detail.invalidRelationErrors"}),_react2.default.createElement(_toccoUi.SignalList.List,null,_form2.default.formErrorsUtil.getRelatedEntityErrorsCompact(formErrors).map(function(message,idx){return _react2.default.createElement(_toccoUi.SignalList.Item,{condition:_toccoUi.stylingCondition.DANGER,key:idx,label:message})})))),elements.length>0&&(output=_react2.default.createElement(_toccoUi.SignalBox,{condition:_toccoUi.stylingCondition.DANGER},_react2.default.createElement(_toccoUi.SignalList.List,null,elements.map(function(el){return el})))),output};ErrorBox.propTypes={formErrors:_propTypes2.default.object,showErrors:_propTypes2.default.func.isRequired},exports.default=ErrorBox},2906:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _formField2=_interopRequireDefault(__webpack_require__(366)),_subGrid2=_interopRequireDefault(__webpack_require__(2834));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={binary:_formField2.default.formattedValueFactory("document"),birthdate:_formField2.default.formattedValueFactory("birthdate"),boolean:_formField2.default.formattedValueFactory("boolean"),code:_formField2.default.formattedValueFactory("text"),counter:_formField2.default.formattedValueFactory("string"),"data-amount":_formField2.default.formattedValueFactory("number"),date:_formField2.default.formattedValueFactory("date"),datetime:_formField2.default.formattedValueFactory("datetime"),time:_formField2.default.formattedValueFactory("time"),decimal:_formField2.default.formattedValueFactory("decimal"),display:_formField2.default.formattedValueFactory("html"),duration:_formField2.default.formattedValueFactory("duration"),document:_formField2.default.formattedValueFactory("document"),email:_formField2.default.formattedValueFactory("email"),html:_formField2.default.formattedValueFactory("html"),image:_formField2.default.formattedValueFactory("document"),identifier:_formField2.default.formattedValueFactory("string"),latitude:_formField2.default.formattedValueFactory("number"),login:_formField2.default.formattedValueFactory("string"),long:_formField2.default.formattedValueFactory("string"),longitude:_formField2.default.formattedValueFactory("number"),moneyamount:_formField2.default.formattedValueFactory("moneyamount"),"multi-remote-field":_formField2.default.formattedValueFactory("multi-remote"),"multi-select-box":_formField2.default.formattedValueFactory("multi-select"),"named-upload":_formField2.default.formattedValueFactory("document"),integer:_formField2.default.formattedValueFactory("number"),percent:_formField2.default.formattedValueFactory("number"),phone:_formField2.default.formattedValueFactory("phone"),"pulldown-date":_formField2.default.formattedValueFactory("date"),range:{date:_formField2.default.formattedValueFactory("date-range"),birthdate:_formField2.default.formattedValueFactory("date-range")},remote:_formField2.default.formattedValueFactory("remote"),"search-filter":_formField2.default.formattedValueFactory("search-filter"),"single-remote-field":_formField2.default.formattedValueFactory("remote"),"single-select-box":_formField2.default.formattedValueFactory("single-select"),sorting:_formField2.default.formattedValueFactory("number"),string:_formField2.default.formattedValueFactory("string"),text:_formField2.default.formattedValueFactory("text"),"text-area":_formField2.default.formattedValueFactory("text"),upload:_formField2.default.formattedValueFactory("document"),url:_formField2.default.formattedValueFactory("url"),uuid:_formField2.default.formattedValueFactory("string"),subTable:(0,_subGrid2.default)()}},2907:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var strings,raw,obj,_templateObject=(strings=["\n  && {\n    .detail-form {\n      outline: none;\n    }\n  }\n"],raw=["\n  && {\n    .detail-form {\n      outline: none;\n    }\n  }\n"],Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))),_styledComponents=__webpack_require__(8);var StyledDetailForm=((obj=_styledComponents)&&obj.__esModule?obj:{default:obj}).default.div(_templateObject);exports.default=StyledDetailForm},2908:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDispatchActions=void 0;var _actions=__webpack_require__(2808);exports.getDispatchActions=function(input){return[(0,_actions.setEntityName)(input.entityName),(0,_actions.setEntityId)(input.entityId?input.entityId:null),(0,_actions.setMode)(input.mode),(0,_actions.setFormName)(input.formName),(0,_actions.setShowSubGridsCreateButton)(input.showSubGridsCreateButton),(0,_actions.loadDetailView)(),(0,_actions.setAppId)(input.id)]}},2909:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inputSelector=exports.entityBrowserSelector=void 0,exports.default=sagas,exports.clearDetailParams=clearDetailParams,exports.loadEntityDetail=loadEntityDetail,exports.getTargetEntity=getTargetEntity;var actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2817)),_entities=__webpack_require__(2910),_parseUrl2=_interopRequireDefault(__webpack_require__(2911)),_showBackButton2=_interopRequireDefault(__webpack_require__(2912)),_detail2=_interopRequireDefault(__webpack_require__(2913)),_effects=__webpack_require__(14);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _marked=regeneratorRuntime.mark(sagas),_marked2=regeneratorRuntime.mark(clearDetailParams),_marked3=regeneratorRuntime.mark(loadEntityDetail),_marked4=regeneratorRuntime.mark(getTargetEntity),entityBrowserSelector=exports.entityBrowserSelector=function(state){return state.entityBrowser},inputSelector=exports.inputSelector=function(state){return state.input};function sagas(){return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.all)([(0,_effects.fork)(_effects.takeLatest,actions.LOAD_DETAIL_PARAMS,loadEntityDetail),(0,_effects.fork)(_effects.takeLatest,actions.CLEAR_DETAIL_PARAMS,clearDetailParams)]);case 2:case"end":return _context.stop()}},_marked,this)}function clearDetailParams(){return regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,(0,_effects.put)(actions.setDetailParams(void 0));case 2:case"end":return _context2.stop()}},_marked2,this)}function loadEntityDetail(_ref){var _ref2,modelPaths,entityId,parentUrl,_ref3,entityName,formBase,mode,targetEntityName,formName,formExtension,_ref4,initialKey,showBackButton,detailParams,payload=_ref.payload;return regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,(0,_effects.call)(_parseUrl2.default,payload.url);case 2:return _ref2=_context3.sent,modelPaths=_ref2.modelPaths,entityId=_ref2.entityId,parentUrl=_ref2.parentUrl,_context3.next=8,(0,_effects.select)(entityBrowserSelector);case 8:return _ref3=_context3.sent,entityName=_ref3.entityName,formBase=_ref3.formBase,_context3.next=13,(0,_effects.call)(_detail2.default.getMode,entityId);case 13:if(mode=_context3.sent,targetEntityName=entityName,formName=formBase,!(modelPaths&&modelPaths.length>0)){_context3.next=21;break}return _context3.next=19,(0,_effects.call)(getTargetEntity,entityName,modelPaths);case 19:targetEntityName=_context3.sent,formName=formBase+"_"+targetEntityName;case 21:return _context3.next=23,(0,_effects.call)(_detail2.default.getFormExtension,mode);case 23:return formExtension=_context3.sent,formName+=formExtension,_context3.next=27,(0,_effects.select)(inputSelector);case 27:return _ref4=_context3.sent,initialKey=_ref4.initialKey,_context3.next=31,(0,_effects.call)(_showBackButton2.default,initialKey,modelPaths);case 31:return showBackButton=_context3.sent,detailParams={mode:mode,entityId:entityId,entityName:targetEntityName,formName:formName,parentUrl:parentUrl,showBackButton:showBackButton},_context3.next=35,(0,_effects.put)(actions.setDetailParams(detailParams));case 35:case"end":return _context3.stop()}},_marked3,this)}function getTargetEntity(entityName,modelPaths){var targetEntityName,model,i,path,relation;return regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return targetEntityName=entityName,_context4.next=3,(0,_effects.call)(_entities.fetchModel,targetEntityName);case 3:model=_context4.sent,i=0;case 5:if(!(i<modelPaths.length)){_context4.next=18;break}if(path=modelPaths[i],relation=model[path]){_context4.next=10;break}throw new Error("No such path '"+path+"' found on entity model '"+targetEntityName+"'");case 10:if(targetEntityName=relation.targetEntity,!(i+1<modelPaths.length)){_context4.next=15;break}return _context4.next=14,(0,_effects.call)(_entities.fetchModel,targetEntityName);case 14:model=_context4.sent;case 15:i++,_context4.next=5;break;case 18:return _context4.abrupt("return",targetEntityName);case 19:case"end":return _context4.stop()}},_marked4,this)}},2910:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultModelTransformer=void 0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.fetchModel=fetchModel;var obj,_rest=__webpack_require__(47),_rest2=(obj=_rest)&&obj.__esModule?obj:{default:obj},_effects=__webpack_require__(14);var _marked=regeneratorRuntime.mark(fetchModel),defaultModelTransformer=exports.defaultModelTransformer=function(json){var model={};return json.fields.forEach(function(field){model[field.fieldName]=_extends({},field)}),json.relations.forEach(function(relation){model[relation.relationName]=_extends({type:"relation"},relation)}),model};function fetchModel(entityName){var resp,transformer=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultModelTransformer;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,(0,_effects.call)(_rest2.default.requestSaga,"entities/"+entityName+"/model");case 2:return resp=_context.sent,_context.next=5,(0,_effects.call)(transformer,resp.body);case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}},_marked,this)}},2911:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(url){var parts=url.split("/").filter(function(part){return!!part}),lastPart=parts[parts.length-1],modelPaths=parts.filter(function(el,idx){return idx>1&&idx%2==0});if(isNaN(lastPart))return{modelPaths:modelPaths,entityId:void 0,parentUrl:"/"+parts.slice(0,-1).join("/")};return{modelPaths:modelPaths,entityId:parts[parts.length-1],parentUrl:"/"+parts.slice(0,-2).join("/")}}},2912:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(initialKey,modelPaths){return 0!==modelPaths.length||!initialKey||isNaN(initialKey)}},2913:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var modes={CREATE:"create",UPDATE:"update"},getMode=exports.getMode=function(entityId){return void 0===entityId?modes.CREATE:modes.UPDATE},getFormExtension=exports.getFormExtension=function(mode){return mode===modes.CREATE?"_create":"_detail"};exports.default={modes:modes,getMode:getMode,getFormExtension:getFormExtension}},2914:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_reducer=__webpack_require__(2915),_reducer2=(obj=_reducer)&&obj.__esModule?obj:{default:obj};exports.default=_reducer2.default},2915:function(module,exports,__webpack_require__){"use strict";var _ACTION_HANDLERS;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,action=arguments[1],handler=ACTION_HANDLERS[action.type];return handler?handler(state,action):state};var obj,_reducer=__webpack_require__(45),_reducer2=(obj=_reducer)&&obj.__esModule?obj:{default:obj},actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(__webpack_require__(2817));function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ACTION_HANDLERS=(_defineProperty(_ACTION_HANDLERS={},actions.SET_FORM_TOUCHED,_reducer2.default.singleTransferReducer("formTouched")),_defineProperty(_ACTION_HANDLERS,actions.SET_DETAIL_PARAMS,_reducer2.default.singleTransferReducer("detailParams")),_ACTION_HANDLERS),initialState={detailParams:void 0,formTouched:!1}},2916:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var getFormSyncErrors=function(_ref){var getIn=_ref.getIn,empty=_ref.empty;return function(form,getFormState){return function(state){var nonNullGetFormState=getFormState||function(state){return getIn(state,"form")};return getIn(nonNullGetFormState(state),form+".syncErrors")||empty}}},plain=__webpack_require__(21);__webpack_exports__.default=getFormSyncErrors(plain.a)},2917:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var getFormAsyncErrors=function(_ref){var getIn=_ref.getIn;return function(form,getFormState){return function(state){var nonNullGetFormState=getFormState||function(state){return getIn(state,"form")};return getIn(nonNullGetFormState(state),form+".asyncErrors")}}},plain=__webpack_require__(21);__webpack_exports__.default=getFormAsyncErrors(plain.a)},2918:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var getFormSubmitErrors=function(_ref){var getIn=_ref.getIn,empty=_ref.empty;return function(form,getFormState){return function(state){var nonNullGetFormState=getFormState||function(state){return getIn(state,"form")};return getIn(nonNullGetFormState(state),form+".submitErrors")||empty}}},plain=__webpack_require__(21);__webpack_exports__.default=getFormSubmitErrors(plain.a)}}]);
//# sourceMappingURL=10.430e93ad1e4c4194a0d0.bundle.js.map