(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{2101:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(158),__webpack_require__(73),__webpack_require__(194),__webpack_require__(148),__webpack_require__(10);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),isEmpty=__webpack_require__(426),isEmpty_default=__webpack_require__.n(isEmpty),get=__webpack_require__(37),get_default=__webpack_require__.n(get),index_es6=__webpack_require__(2092),ButtonLink=__webpack_require__(91),StyledEditableValue=__webpack_require__(64),taggedTemplateLiteral=__webpack_require__(13),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral);function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  && {\n    ","\n  }\n"]);return _templateObject=function(){return data},data}var typeEditors_StyledPhoneEdit=__webpack_require__(6).default.input.attrs({type:"tel"})(_templateObject(),StyledEditableValue.e),amountOfSpacesBeforeCaret=function(str,caretPosition){var spaces=str.substring(0,caretPosition-1).match(/\s/g);return spaces?spaces.length:0},PhoneEdit=function(props){var inputEl=Object(react.useRef)(null),country=get_default()(props,"options.defaultCountry","CH"),displayValue=function(value,country){return new index_es6.AsYouType(country).input(value)}(props.value,country);return react_default.a.createElement(StyledEditableValue.c,{immutable:props.immutable},react_default.a.createElement(typeEditors_StyledPhoneEdit,{disabled:props.immutable,id:props.id,name:name,onChange:function handleChange(e){var newValue=e.target.value,parsedNumber=Object(index_es6.parseNumber)(newValue,country),valueNormalized=isEmpty_default()(parsedNumber)?new index_es6.AsYouType(country).input(newValue).replace(/\s/g,""):Object(index_es6.formatNumber)(parsedNumber,"E.164");props.onChange(valueNormalized);var currentCaretPosition=e.target.selectionStart;!function(value,previousValue,caretPosition,country,inputEl){if(caretPosition&&value.length!==caretPosition){var previousFormatted=new index_es6.AsYouType(country).input(previousValue),currentFormatted=new index_es6.AsYouType(country).input(value),spacesPrevious=amountOfSpacesBeforeCaret(previousFormatted,caretPosition),spacesCurrent=amountOfSpacesBeforeCaret(currentFormatted,caretPosition);window.requestAnimationFrame(function(){var start=caretPosition+(spacesCurrent-spacesPrevious);this.setSelectionRange(start,start)}.bind(inputEl.current))}}(newValue,props.value,currentCaretPosition,country,inputEl)},immutable:props.immutable,ref:inputEl,value:displayValue}),displayValue&&react_default.a.createElement(StyledEditableValue.a,null,react_default.a.createElement(ButtonLink.a,{href:"tel:".concat(props.value),icon:"phone",look:"ball",tabIndex:-1})))};PhoneEdit.displayName="PhoneEdit";__webpack_exports__.default=PhoneEdit;PhoneEdit.__docgenInfo={description:"",methods:[],displayName:"PhoneEdit",props:{onChange:{type:{name:"func"},required:!0,description:""},value:{type:{name:"node"},required:!1,description:""},name:{type:{name:"string"},required:!1,description:""},id:{type:{name:"string"},required:!1,description:""},immutable:{type:{name:"bool"},required:!1,description:""},options:{type:{name:"shape",value:{defaultCountry:{name:"string",required:!1},customPhoneRegex:{name:"string",required:!1}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/tocco-ui/src/EditableValue/typeEditors/PhoneEdit.js"]={name:"PhoneEdit",docgenInfo:PhoneEdit.__docgenInfo,path:"packages/tocco-ui/src/EditableValue/typeEditors/PhoneEdit.js"})}}]);
//# sourceMappingURL=PhoneEdit.1f060d22a7b0a7d635a6.bundle.js.map