(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{2102:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(20),__webpack_require__(588),__webpack_require__(28),__webpack_require__(22),__webpack_require__(33),__webpack_require__(589),__webpack_require__(27),__webpack_require__(8),__webpack_require__(29),__webpack_require__(34),__webpack_require__(19),__webpack_require__(23);var helpers_extends=__webpack_require__(54),extends_default=__webpack_require__.n(helpers_extends),classCallCheck=__webpack_require__(42),classCallCheck_default=__webpack_require__.n(classCallCheck),createClass=__webpack_require__(43),createClass_default=__webpack_require__.n(createClass),possibleConstructorReturn=__webpack_require__(44),possibleConstructorReturn_default=__webpack_require__.n(possibleConstructorReturn),getPrototypeOf=__webpack_require__(45),getPrototypeOf_default=__webpack_require__.n(getPrototypeOf),assertThisInitialized=__webpack_require__(24),assertThisInitialized_default=__webpack_require__.n(assertThisInitialized),inherits=__webpack_require__(46),inherits_default=__webpack_require__.n(inherits),defineProperty=__webpack_require__(18),defineProperty_default=__webpack_require__.n(defineProperty),react=__webpack_require__(0),react_default=__webpack_require__.n(react),index_es=(__webpack_require__(10),__webpack_require__(16)),isEqual=__webpack_require__(343),isEqual_default=__webpack_require__.n(isEqual),styled_components_browser_esm=__webpack_require__(6),flatpickr=(__webpack_require__(2062),__webpack_require__(2064)),flatpickr_default=__webpack_require__.n(flatpickr),de=__webpack_require__(2065),fr=__webpack_require__(2066),it=__webpack_require__(2067),utilStyles=__webpack_require__(2),Button=__webpack_require__(25),taggedTemplateLiteral=__webpack_require__(13),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),StyledEditableValue=__webpack_require__(64);function _templateObject3(){var data=taggedTemplateLiteral_default()(["\n  && {\n    ","\n\n    input {\n      display: ","\n\n      &:last-of-type {\n        display: ","\n      }\n    }\n  }\n"]);return _templateObject3=function(){return data},data}function _templateObject2(){var data=taggedTemplateLiteral_default()(["\n  &&& {\n    ","\n  }\n"]);return _templateObject2=function(){return data},data}function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  && {\n    ",";\n    \n    display: ","\n  }\n"]);return _templateObject=function(){return data},data}var StyledDateAbstractControl=styled_components_browser_esm.default.div(_templateObject(),StyledEditableValue.b,function(props){return props.hideButton?"none":"block"}),StyledDateAbstractInput=styled_components_browser_esm.default.input(_templateObject2(),StyledEditableValue.e),StyledDateAbstractWrapper=styled_components_browser_esm.default.div(_templateObject3(),StyledEditableValue.d,function(props){return props.immutable?"none":"block"},function(props){return props.immutable?"block":"none"});function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}var localeMap={"de-CH":de.German,de:de.German,fr:fr.French,it:it.Italian},_ref=react_default.a.createElement(Button.b,{icon:"times",look:"ball",tabIndex:-1}),DateAbstract_DateAbstract=function(_React$Component){function DateAbstract(props){var _this;return classCallCheck_default()(this,DateAbstract),_this=possibleConstructorReturn_default()(this,getPrototypeOf_default()(DateAbstract).call(this,props)),defineProperty_default()(assertThisInitialized_default()(_this),"Flatpickr",null),defineProperty_default()(assertThisInitialized_default()(_this),"componentIsUnmounted",!1),defineProperty_default()(assertThisInitialized_default()(_this),"initializeFlatPickr",function(){var locale=localeMap[_this.props.intl.locale];_this.options=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach(function(key){defineProperty_default()(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))});return target}({wrap:!0,onChange:_this.handleOnChange,altInput:!0,altInputClass:"",clickOpens:!_this.props.immutable,defaultDate:_this.props.value},locale?{locale:locale}:{},{},_this.props.options?_this.props.options.flatpickrOptions:{}),_this.flatpickr=new flatpickr_default.a(_this.wrapper.current,_this.options),_this.flatpickr.calendarContainer.classList.add("tocco-ui-theme"),_this.flatpickr.calendarContainer.style.fontFamily=utilStyles.p.fontFamily("regular")(_this.props),_this.props.initialized&&_this.props.initialized(),_this.setState({altInput:_this.flatpickr.altInput.value})}),defineProperty_default()(assertThisInitialized_default()(_this),"getLocale",function(localeCode){if(_this.localeMap){var locale=_this.localeMap[localeCode];return locale||(locale=flatpickr_default.a.l10ns.en),locale}return null}),defineProperty_default()(assertThisInitialized_default()(_this),"handleOnChange",function(selectedDates){var isoStrings=selectedDates.map(function(date){return date.toISOString()});_this.props.onChange(isoStrings)}),defineProperty_default()(assertThisInitialized_default()(_this),"hasValue",function(){return _this.props.value&&0<_this.props.value.length&&_this.props.value.every(function(v){return v})}),defineProperty_default()(assertThisInitialized_default()(_this),"handleOnBlur",function(){if(_this.props.onBlur){var altValue=_this.flatpickr.altInput.value;_this.props.onBlur(altValue,_this.flatpickr.selectedDates,function(r){return _this.flatpickr.setDate(r,!0)})}}),_this.wrapper=react_default.a.createRef(),_this.state={altInput:""},_this}return inherits_default()(DateAbstract,_React$Component),createClass_default()(DateAbstract,[{key:"componentDidMount",value:function componentDidMount(){this.initializeFlatPickr()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.Flatpickr&&this.flatpickr){if(isEqual_default()(prevProps.options.flatpickrOptions.altFormat,this.props.options.flatpickrOptions.altFormat)||(this.flatpickr.set("altFormat",this.props.options.flatpickrOptions.altFormat),this.flatpickr.redraw()),!isEqual_default()(prevProps.intl.locale,this.props.intl.locale)){var locale=this.getLocale(this.props.intl.locale);this.Flatpickr.localize(locale),this.flatpickr.set("locale",locale),this.flatpickr.redraw()}isEqual_default()(prevProps.value,this.props.value)||(this.flatpickr.setDate(this.props.value,!1),this.flatpickr.redraw())}}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.componentIsUnmounted=!0,this.flatpickr&&this.flatpickr.destroy()}},{key:"render",value:function render(){return react_default.a.createElement(StyledDateAbstractWrapper,{"data-wrap":!0,onBlur:this.handleOnBlur,immutable:this.props.immutable,ref:this.wrapper},react_default.a.createElement(StyledDateAbstractInput,extends_default()({type:"text","data-input":!0,immutable:this.props.immutable},this.props.options?{placeholder:this.props.options.placeholderText}:{})),react_default.a.createElement(StyledDateAbstractInput,{disabled:!0,immutable:this.props.immutable,value:this.state.altInput}),react_default.a.createElement(StyledDateAbstractControl,{"data-clear":!0,hideButton:!this.hasValue()||this.props.immutable},_ref))}}]),DateAbstract}(react_default.a.Component);DateAbstract_DateAbstract.displayName="DateAbstract";__webpack_exports__.default=Object(styled_components_browser_esm.withTheme)(Object(index_es.injectIntl)(DateAbstract_DateAbstract));DateAbstract_DateAbstract.__docgenInfo={description:"",methods:[{name:"initializeFlatPickr",docblock:null,modifiers:[],params:[],returns:null},{name:"getLocale",docblock:null,modifiers:[],params:[{name:"localeCode",type:null}],returns:null},{name:"handleOnChange",docblock:null,modifiers:[],params:[{name:"selectedDates",type:null}],returns:null},{name:"hasValue",docblock:null,modifiers:[],params:[],returns:null},{name:"handleOnBlur",docblock:null,modifiers:[],params:[],returns:null}],displayName:"DateAbstract",props:{intl:{type:{name:"custom",raw:"intlShape.isRequired"},required:!1,description:""},onBlur:{type:{name:"func"},required:!1,description:""},onChange:{type:{name:"func"},required:!1,description:""},value:{type:{name:"arrayOf",value:{name:"string"}},required:!1,description:""},options:{type:{name:"shape",value:{placeholderText:{name:"string",required:!1},flatpickrOptions:{name:"object",required:!1}}},required:!1,description:""},immutable:{type:{name:"bool"},required:!1,description:""},initialized:{type:{name:"func"},required:!1,description:""},events:{type:{name:"shape",value:{onFocus:{name:"func",required:!1}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/tocco-ui/src/EditableValue/typeEditors/DateAbstract.js"]={name:"DateAbstract",docgenInfo:DateAbstract_DateAbstract.__docgenInfo,path:"packages/tocco-ui/src/EditableValue/typeEditors/DateAbstract.js"})}}]);
//# sourceMappingURL=DateAbstract.1f060d22a7b0a7d635a6.bundle.js.map